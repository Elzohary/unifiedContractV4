2025-07-20 16:20:04.496 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 16:20:04.566 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 16:20:04.594 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 16:20:04.595 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 16:20:05.234 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 16:20:05.246 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 16:20:05.263 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 16:20:05.319 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 16:20:05.326 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 16:20:05.327 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 16:20:05.330 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 16:20:05.335 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 16:20:05.337 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 16:20:05.340 +03:00 [INF] Starting web host
2025-07-20 16:20:05.352 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 16:20:05.402 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5275: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-07-20 16:20:05.416 +03:00 [FTL] Host terminated unexpectedly
System.IO.IOException: Failed to bind to address http://127.0.0.1:5275: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Program.cs:line 204
2025-07-20 17:12:55.587 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:12:55.674 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:12:55.675 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:12:55.676 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:12:56.341 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:12:56.351 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:12:56.365 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:12:56.415 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:12:56.425 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:12:56.426 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:12:56.430 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:12:56.435 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:12:56.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:12:56.443 +03:00 [INF] Starting web host
2025-07-20 17:12:56.460 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:12:56.510 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:12:56.513 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:12:56.513 +03:00 [INF] Hosting environment: Development
2025-07-20 17:12:56.514 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:12:59.220 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:12:59.220 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:12:59.248 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:12:59.256 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:12:59.256 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:12:59.258 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:12:59.258 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:12:59.260 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:12:59.260 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:12:59.264 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 45.9799ms
2025-07-20 17:12:59.264 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 45.9887ms
2025-07-20 17:12:59.268 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:12:59.268 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:12:59.275 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:12:59.275 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:12:59.276 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:12:59.276 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:12:59.377 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:12:59.377 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:12:59.391 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:12:59.391 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:12:59.397 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:12:59.406 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 10.9817ms
2025-07-20 17:12:59.407 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:12:59.407 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:12:59.416 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 147.201ms
2025-07-20 17:12:59.602 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:12:59.657 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:12:59.724 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 331.6613ms
2025-07-20 17:12:59.725 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:12:59.726 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:12:59.733 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 464.3051ms
2025-07-20 17:14:05.664 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:14:05.665 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:14:05.666 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:14:05.666 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:14:05.667 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 2.5491ms
2025-07-20 17:14:05.669 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:14:05.670 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:14:05.670 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:14:05.676 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:14:05.677 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:14:05.677 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:14:05.678 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 0.7048ms
2025-07-20 17:14:05.678 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:14:05.679 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:14:05.680 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 10.5142ms
2025-07-20 17:14:05.695 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:14:05.696 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:14:05.697 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:14:05.697 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:14:05.697 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.3392ms
2025-07-20 17:14:05.700 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:14:05.701 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:14:05.702 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:14:05.703 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:14:05.703 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:14:05.776 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:14:05.778 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:14:05.779 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 74.7538ms
2025-07-20 17:14:05.779 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:14:05.779 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:14:05.781 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 80.7398ms
2025-07-20 17:15:32.704 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:15:32.705 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:15:32.705 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:15:32.706 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:15:32.707 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 2.5973ms
2025-07-20 17:15:32.708 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:15:32.709 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:15:32.709 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:15:32.710 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:15:32.711 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:15:32.712 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:15:32.712 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 0.9602ms
2025-07-20 17:15:32.713 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:15:32.713 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:15:32.713 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 5.0521ms
2025-07-20 17:15:32.774 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:15:32.775 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:15:32.775 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:15:32.776 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:15:32.776 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.0844ms
2025-07-20 17:15:32.777 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:15:32.778 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:15:32.779 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:15:32.780 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:15:32.780 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:15:32.786 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:15:32.788 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:15:32.789 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 8.0546ms
2025-07-20 17:15:32.789 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:15:32.789 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:15:32.790 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 12.6273ms
2025-07-20 17:15:40.774 +03:00 [INF] Application is shutting down...
2025-07-20 17:16:10.691 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:16:10.759 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:16:10.760 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:16:10.761 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:16:11.305 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:16:11.312 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:16:11.325 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:16:11.361 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:16:11.368 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:16:11.369 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:16:11.372 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:16:11.377 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:16:11.379 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:16:11.382 +03:00 [INF] Starting web host
2025-07-20 17:16:11.391 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:16:11.435 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:16:11.437 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:16:11.437 +03:00 [INF] Hosting environment: Development
2025-07-20 17:16:11.438 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:18:34.124 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:18:34.124 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:18:34.160 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:18:34.166 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:18:34.166 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:18:34.167 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:34.167 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:34.169 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:18:34.169 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:18:34.173 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 51.9463ms
2025-07-20 17:18:34.173 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 51.9526ms
2025-07-20 17:18:34.176 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:18:34.176 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:18:34.185 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:18:34.185 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:18:34.186 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:34.186 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:34.261 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:18:34.261 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:18:34.275 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:18:34.275 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:18:34.281 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:18:34.289 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 10.3742ms
2025-07-20 17:18:34.290 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:18:34.290 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:18:34.304 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 127.8837ms
2025-07-20 17:18:34.532 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:18:34.599 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:18:34.682 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 404.3164ms
2025-07-20 17:18:34.684 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:18:34.686 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:18:34.693 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 516.8293ms
2025-07-20 17:18:53.969 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:18:53.970 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:18:53.971 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:53.972 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:18:53.972 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 3.0551ms
2025-07-20 17:18:53.975 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 128
2025-07-20 17:18:53.978 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"45","description":"T","unit":"d","unitPrice":1,"paymentType":"dsadas","managementArea":"dasdsa ","currency":"ds"}
2025-07-20 17:18:53.979 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:18:53.984 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:18:53.994 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:18:54.045 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:18:54.064 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 68.8388ms
2025-07-20 17:18:54.065 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:18:54.065 +03:00 [INF] HTTP POST /api/work-order-items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"CreatedBy":["The CreatedBy field is required."],"LastModifiedBy":["The LastModifiedBy field is required."],"ReasonForFinalQuantity":["The ReasonForFinalQuantity field is required."]},"traceId":"00-1d670ed708302f7e486e5859ed7e0214-5fa9a14dde881958-00"}
2025-07-20 17:18:54.066 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 400 null application/problem+json; charset=utf-8 91.1623ms
2025-07-20 17:19:26.604 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:19:26.604 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:19:26.605 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:19:26.605 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:19:26.606 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.3044ms
2025-07-20 17:19:26.608 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 144
2025-07-20 17:19:26.609 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"324235","description":"fdsfsdfhgdfhg","unit":"fds","unitPrice":4,"paymentType":"cash","managementArea":"sadffd","currency":"sar"}
2025-07-20 17:19:26.610 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:19:26.612 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:19:26.612 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:19:26.619 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:19:26.620 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 6.4309ms
2025-07-20 17:19:26.621 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:19:26.621 +03:00 [INF] HTTP POST /api/work-order-items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"CreatedBy":["The CreatedBy field is required."],"LastModifiedBy":["The LastModifiedBy field is required."],"ReasonForFinalQuantity":["The ReasonForFinalQuantity field is required."]},"traceId":"00-4844d848fd8f4b785ac7c02b778180e2-c4fcaf7c9adc6d14-00"}
2025-07-20 17:19:26.622 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 400 null application/problem+json; charset=utf-8 14.6776ms
2025-07-20 17:20:45.081 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 17:20:45.081 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:20:45.082 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:45.082 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 17:20:45.083 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 1.8991ms
2025-07-20 17:20:45.086 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:20:45.086 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:20:45.087 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:45.089 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:20:45.093 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:20:45.291 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:20:45.448 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:20:45.455 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 360.9027ms
2025-07-20 17:20:45.455 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:20:45.455 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:20:45.457 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 371.6733ms
2025-07-20 17:20:46.312 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.313 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.313 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.314 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.315 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:20:46.315 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 3.3517ms
2025-07-20 17:20:46.316 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.317 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.317 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:20:46.317 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 4.3729ms
2025-07-20 17:20:46.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.319 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.320 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.321 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.321 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.321 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.323 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:20:46.324 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:20:46.324 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.4405ms
2025-07-20 17:20:46.326 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:20:46.332 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.333 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.334 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.333 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:20:46.336 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:20:46.337 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 5.364ms
2025-07-20 17:20:46.338 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:20:46.343 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.344 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.345 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.346 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:20:46.347 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.8743ms
2025-07-20 17:20:46.348 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:20:46.352 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:20:46.353 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:20:46.353 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:46.355 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:20:46.356 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.7858ms
2025-07-20 17:20:46.357 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:20:46.443 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:20:46.629 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:20:46.666 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:20:46.671 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 335.4223ms
2025-07-20 17:20:46.671 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:20:46.672 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 17:20:46.673 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 354.4999ms
2025-07-20 17:20:48.258 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:20:48.259 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:20:48.260 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:48.260 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Response: 204: 
2025-07-20 17:20:48.260 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - 204 null null 2.3571ms
2025-07-20 17:20:48.263 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:20:48.264 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:20:48.265 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:20:48.266 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:20:48.270 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:20:48.273 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:20:48.274 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 3.0775ms
2025-07-20 17:20:48.275 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:20:48.275 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"id":["The value 'undefined' is not valid."]},"traceId":"00-9dcf0a421b54afc9825333a409bd50fd-5cb2b8109cd1da90-00"}
2025-07-20 17:20:48.277 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - 400 null application/problem+json; charset=utf-8 13.8613ms
2025-07-20 17:21:04.548 +03:00 [INF] Application is shutting down...
2025-07-20 17:21:16.495 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:21:16.565 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:21:16.567 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:21:16.567 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:21:17.153 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:21:17.159 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:21:17.173 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:21:17.215 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:21:17.221 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:21:17.223 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:21:17.226 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:21:17.230 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:21:17.233 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:21:17.236 +03:00 [INF] Starting web host
2025-07-20 17:21:17.249 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:21:17.307 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:21:17.310 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:21:17.311 +03:00 [INF] Hosting environment: Development
2025-07-20 17:21:17.311 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:21:37.017 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:21:37.038 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:21:37.043 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:21:37.045 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:21:37.046 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:21:37.049 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 32.6459ms
2025-07-20 17:21:37.051 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - application/json 2081
2025-07-20 17:21:37.056 +03:00 [INF] HTTP PUT /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  {"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000,"engineerInCharge":"","details":{"workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","completionPercentage":0,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdBy":"seed"},"permits":[{"id":"1753021296980Initial","type":"Initial","status":"approved","title":"","description":"","number":"","authority":"","issueDate":"2025-07-20T14:21:36.980Z","expiryDate":"2025-07-20T14:21:36.980Z","issuedBy":"","documentRef":"","attachments":[]},{"id":"1753021296980Municipality","type":"Municipality","status":"pending","title":"","description":"","number":"","authority":"","issueDate":"2025-07-20T14:21:36.980Z","expiryDate":"2025-07-20T14:21:36.980Z","issuedBy":"","documentRef":"","attachments":[]},{"id":"1753021296980RoadDepartment","type":"RoadDepartment","status":"pending","title":"","description":"","number":"","authority":"","issueDate":"2025-07-20T14:21:36.980Z","expiryDate":"2025-07-20T14:21:36.980Z","issuedBy":"","documentRef":"","attachments":[]},{"id":"1753021296980Traffic","type":"Traffic","status":"pending","title":"","description":"","number":"","authority":"","issueDate":"2025-07-20T14:21:36.980Z","expiryDate":"2025-07-20T14:21:36.980Z","issuedBy":"","documentRef":"","attachments":[]}]}
2025-07-20 17:21:37.059 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:21:37.118 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.UpdateWorkOrder (UnifiedContract.API)'
2025-07-20 17:21:37.132 +03:00 [INF] Route matched with {action = "UpdateWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateWorkOrder(System.Guid, UnifiedContract.Domain.Entities.WorkOrder.WorkOrder) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:21:37.372 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:21:37.397 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.UpdateWorkOrder (UnifiedContract.API) in 261.6748ms
2025-07-20 17:21:37.398 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.UpdateWorkOrder (UnifiedContract.API)'
2025-07-20 17:21:37.398 +03:00 [INF] HTTP PUT /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"workOrder":["The workOrder field is required."],"$.client":["The JSON value could not be converted to UnifiedContract.Domain.Entities.Client.Client. Path: $.client | LineNumber: 0 | BytePositionInLine: 201."]},"traceId":"00-0128cc6cb6a2c4004ee74fb04c8d7f2b-714397c7aad341e7-00"}
2025-07-20 17:21:37.400 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 400 null application/problem+json; charset=utf-8 348.8383ms
2025-07-20 17:21:37.415 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:21:37.418 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:21:37.418 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:21:37.421 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:21:37.424 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:21:37.733 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:21:37.891 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:21:38.108 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:21:38.117 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 691.7145ms
2025-07-20 17:21:38.118 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:21:38.118 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 17:21:38.127 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 711.8749ms
2025-07-20 17:21:54.138 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:21:54.139 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:21:54.140 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:21:54.141 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:21:54.141 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 3.5448ms
2025-07-20 17:21:54.143 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:21:54.145 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:21:54.146 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:21:54.153 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:21:54.160 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:21:54.241 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:21:54.245 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:21:54.254 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 92.491ms
2025-07-20 17:21:54.254 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:21:54.255 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:21:54.258 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 114.0187ms
2025-07-20 17:22:06.740 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:22:06.741 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:22:06.742 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:22:06.742 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:22:06.743 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.4347ms
2025-07-20 17:22:06.744 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 134
2025-07-20 17:22:06.746 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"432","description":"sfd","unit":"dsf","unitPrice":5,"paymentType":"fsdfds","managementArea":"fdsfsdf","currency":"dsf"}
2025-07-20 17:22:06.747 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:22:06.749 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:22:06.756 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:22:06.766 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:22:06.767 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 9.2151ms
2025-07-20 17:22:06.768 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:22:06.768 +03:00 [INF] HTTP POST /api/work-order-items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"CreatedBy":["The CreatedBy field is required."],"LastModifiedBy":["The LastModifiedBy field is required."],"ReasonForFinalQuantity":["The ReasonForFinalQuantity field is required."]},"traceId":"00-6cef57144745536a859d5a1c46a9e9c5-ce0c037d4a1bde53-00"}
2025-07-20 17:22:06.769 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 400 null application/problem+json; charset=utf-8 24.766ms
2025-07-20 17:34:15.812 +03:00 [INF] Application is shutting down...
2025-07-20 17:43:47.944 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:43:48.021 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:43:48.021 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:43:48.022 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:43:48.586 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:43:48.592 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:43:48.605 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:43:48.642 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:43:48.649 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:43:48.650 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:43:48.653 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:43:48.660 +03:00 [INF] Applying migration '20250720144259_AddPaymentTypeManagementAreaCurrencyToWorkOrderItem'.
2025-07-20 17:43:48.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Common') IS NULL EXEC(N'CREATE SCHEMA [Common];');
2025-07-20 17:43:48.869 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'HR') IS NULL EXEC(N'CREATE SCHEMA [HR];');
2025-07-20 17:43:48.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Client') IS NULL EXEC(N'CREATE SCHEMA [Client];');
2025-07-20 17:43:48.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Resource') IS NULL EXEC(N'CREATE SCHEMA [Resource];');
2025-07-20 17:43:48.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Analytics') IS NULL EXEC(N'CREATE SCHEMA [Analytics];');
2025-07-20 17:43:48.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Document') IS NULL EXEC(N'CREATE SCHEMA [Document];');
2025-07-20 17:43:48.874 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Auth') IS NULL EXEC(N'CREATE SCHEMA [Auth];');
2025-07-20 17:43:48.889 +03:00 [ERR] Failed executing DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Common].[ActivityLogs] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NOT NULL,
    [EntityName] nvarchar(100) NOT NULL,
    [Details] nvarchar(1000) NOT NULL,
    [IpAddress] nvarchar(50) NOT NULL,
    [UserAgent] nvarchar(500) NOT NULL,
    [Location] nvarchar(100) NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ActivityLogs] PRIMARY KEY ([Id])
);
2025-07-20 17:43:48.893 +03:00 [ERR] An error occurred while migrating or seeding the database.
Microsoft.Data.SqlClient.SqlException (0x80131904): There is already an object named 'ActivityLogs' in the database.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean isAsync, Int32 timeout, Boolean asyncWrite)
   at Microsoft.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String methodName)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteNonQuery(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Migrations.MigrationCommand.ExecuteNonQuery(IRelationalConnection connection, IReadOnlyDictionary`2 parameterValues)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.Execute(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean beginTransaction, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.<>c.<ExecuteNonQuery>b__3_1(DbContext _, ValueTuple`6 s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.MigrationCommandExecutor.ExecuteNonQuery(IReadOnlyList`1 migrationCommands, IRelationalConnection connection, MigrationExecutionState executionState, Boolean commitTransaction, Nullable`1 isolationLevel)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.MigrateImplementation(DbContext context, String targetMigration, MigrationExecutionState state, Boolean useTransaction)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.<>c.<Migrate>b__20_1(DbContext c, ValueTuple`4 s)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Migrations.Internal.Migrator.Migrate(String targetMigration)
   at Microsoft.EntityFrameworkCore.RelationalDatabaseFacadeExtensions.Migrate(DatabaseFacade databaseFacade)
   at Program.<Main>$(String[] args) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Program.cs:line 193
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:2714,State:6,Class:16
2025-07-20 17:43:48.917 +03:00 [INF] Starting web host
2025-07-20 17:43:48.924 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:43:48.967 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:43:48.969 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:43:48.970 +03:00 [INF] Hosting environment: Development
2025-07-20 17:43:48.970 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:44:28.856 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:44:28.856 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:44:28.884 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:44:28.890 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:44:28.890 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:44:28.892 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:28.892 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:28.894 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:44:28.894 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:44:28.898 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 43.3551ms
2025-07-20 17:44:28.898 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 43.3556ms
2025-07-20 17:44:28.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:44:28.900 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:44:28.906 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:44:28.906 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:44:28.906 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:28.906 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:28.968 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:44:28.968 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:44:28.977 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:44:28.977 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:28.980 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:44:28.988 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 7.585ms
2025-07-20 17:44:28.988 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:44:28.988 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:44:28.997 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 97.0615ms
2025-07-20 17:44:29.199 +03:00 [ERR] Failed executing DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:44:29.363 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:29.367 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 388.8712ms
2025-07-20 17:44:29.382 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:44:29.384 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetAllItemsAsync() in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 116
   at UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems() in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 242
   at lambda_method384(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:29.729 +03:00 [INF] HTTP GET /api/work-order-items - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable\u00601 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable\u00601 source, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetAllItemsAsync() in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 116\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems() in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 242\r\n   at lambda_method384(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:29.740 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 500 null application/json 840.0789ms
2025-07-20 17:44:34.528 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 17:44:34.529 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:44:34.530 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:34.530 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 17:44:34.531 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.4107ms
2025-07-20 17:44:34.532 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:44:34.533 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:44:34.533 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:34.538 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:44:34.543 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:34.764 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:44:34.937 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:44:34.962 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 418.5273ms
2025-07-20 17:44:34.963 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:44:34.963 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:44:34.966 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 433.7098ms
2025-07-20 17:44:35.919 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.919 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.920 +03:00 [INF] HTTP OPTIONS /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.921 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.921 +03:00 [INF] HTTP OPTIONS /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 204: 
2025-07-20 17:44:35.921 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.921 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 204 null null 2.7255ms
2025-07-20 17:44:35.922 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.923 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 204: 
2025-07-20 17:44:35.923 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 204 null null 4.4933ms
2025-07-20 17:44:35.923 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.925 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.925 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.925 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.926 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.927 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.928 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:44:35.928 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:35.929 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 3.6288ms
2025-07-20 17:44:35.932 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:44:35.937 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.938 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.939 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.940 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:35.942 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:44:35.942 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 4.9048ms
2025-07-20 17:44:35.943 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:44:35.948 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.949 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.949 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.951 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:44:35.951 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 3.777ms
2025-07-20 17:44:35.952 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:44:35.957 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:35.958 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:35.958 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:35.960 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:44:35.960 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 3.7633ms
2025-07-20 17:44:35.961 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:44:36.053 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:44:36.183 +03:00 [ERR] Failed executing DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:36.190 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.194 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 252.411ms
2025-07-20 17:44:36.195 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.195 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.199 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:36.201 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 500 null application/json 278.151ms
2025-07-20 17:44:36.205 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:36.206 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:36.206 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:36.208 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.208 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:36.219 +03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:36.226 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.231 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 22.8833ms
2025-07-20 17:44:36.232 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.232 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.240 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:36.244 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 500 null application/json 38.4574ms
2025-07-20 17:44:36.248 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:36.249 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:36.249 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:36.250 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.251 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:36.259 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:36.263 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.265 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 13.8763ms
2025-07-20 17:44:36.266 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.266 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.271 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:36.273 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 500 null application/json 24.9912ms
2025-07-20 17:44:36.279 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:44:36.280 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:44:36.280 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:36.281 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.281 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:36.289 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:36.294 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.297 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 15.9254ms
2025-07-20 17:44:36.298 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:36.298 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:36.303 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:36.307 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 500 null application/json 28.738ms
2025-07-20 17:44:38.344 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:44:38.345 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:44:38.345 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:38.347 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:44:38.348 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:38.353 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:44:38.359 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:44:38.360 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 12.4249ms
2025-07-20 17:44:38.361 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:44:38.362 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:44:38.364 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 19.9677ms
2025-07-20 17:44:39.294 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.294 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.295 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.295 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.296 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.296 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.296 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:44:39.297 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:44:39.297 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 2.5388ms
2025-07-20 17:44:39.297 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 3.041ms
2025-07-20 17:44:39.299 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.299 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.300 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.301 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.302 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.301 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.304 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:44:39.305 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.305 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 6.3704ms
2025-07-20 17:44:39.306 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:44:39.306 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:39.311 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.312 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.313 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.314 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:44:39.315 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.9105ms
2025-07-20 17:44:39.315 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:44:39.317 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:39.321 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.325 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.325 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.326 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.327 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 19.5433ms
2025-07-20 17:44:39.327 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.327 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:44:39.328 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 6.9354ms
2025-07-20 17:44:39.328 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:44:39.328 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.333 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.335 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.336 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.336 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:39.340 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 500 null application/json 41.2021ms
2025-07-20 17:44:39.342 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:44:39.342 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 9.1265ms
2025-07-20 17:44:39.343 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:44:39.345 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.345 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.346 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.347 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.347 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:39.356 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:39.363 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.369 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 20.9848ms
2025-07-20 17:44:39.370 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.370 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.377 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:39.383 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 500 null application/json 37.8973ms
2025-07-20 17:44:39.389 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.390 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.391 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.393 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.393 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:39.401 +03:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:39.409 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.413 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 18.723ms
2025-07-20 17:44:39.413 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.414 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.421 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:39.425 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 500 null application/json 35.7535ms
2025-07-20 17:44:39.430 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:44:39.431 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:44:39.431 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:39.432 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.433 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:39.441 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:44:39.450 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.455 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 21.7407ms
2025-07-20 17:44:39.456 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:44:39.456 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 19
   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 74
   at lambda_method1069(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:39.462 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable\u00601 asyncEnumerable, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetWorkOrderWithDetailsAsync(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 19\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder(Guid id) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 74\r\n   at lambda_method1069(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:39.465 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 500 null application/json 35.3918ms
2025-07-20 17:44:41.497 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:44:41.498 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:44:41.499 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:41.499 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:44:41.500 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.9345ms
2025-07-20 17:44:41.502 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:44:41.503 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:44:41.503 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:44:41.505 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:44:41.506 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:44:41.511 +03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:44:41.512 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:41.518 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 11.578ms
2025-07-20 17:44:41.520 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:44:41.520 +03:00 [ERR] An unhandled exception occurred.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'Currency'.
Invalid column name 'ManagementArea'.
Invalid column name 'PaymentType'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetAllItemsAsync() in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.Persistence\Repositories\WorkOrderRepository.cs:line 116
   at UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems() in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 242
   at lambda_method384(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
ClientConnectionId:016ad383-695b-4b56-9a29-b397a71dba20
Error Number:207,State:1,Class:16
2025-07-20 17:44:41.532 +03:00 [INF] HTTP GET /api/work-order-items - Response: 500: {"Status":false,"Message":"Invalid column name \u0027Currency\u0027.\r\nInvalid column name \u0027ManagementArea\u0027.\r\nInvalid column name \u0027PaymentType\u0027.","Data":"   at Microsoft.Data.SqlClient.SqlCommand.\u003C\u003Ec.\u003CExecuteDbDataReaderAsync\u003Eb__211_0(Task\u00601 result)\r\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask\u00602.InnerInvoke()\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n--- End of stack trace from previous location ---\r\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\r\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task\u0026 currentTaskSlot, Thread threadPoolThread)\r\n--- End of stack trace from previous location ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable\u00601.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable\u00601 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable\u00601 source, CancellationToken cancellationToken)\r\n   at UnifiedContract.Persistence.Repositories.WorkOrderRepository.GetAllItemsAsync() in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.Persistence\\Repositories\\WorkOrderRepository.cs:line 116\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems() in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 242\r\n   at lambda_method384(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:44:41.537 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 500 null application/json 35.4742ms
2025-07-20 17:45:45.685 +03:00 [INF] Application is shutting down...
2025-07-20 17:46:36.542 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:46:36.610 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:46:36.612 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:46:36.612 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:46:37.372 +03:00 [INF] Executed DbCommand (202ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [UnifiedContract_Dev];
2025-07-20 17:46:37.454 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [UnifiedContract_Dev] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-07-20 17:46:37.468 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:46:37.470 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:46:37.484 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:46:37.532 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:46:37.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:46:37.540 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:46:37.544 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:46:37.551 +03:00 [INF] Applying migration '20250720144259_AddPaymentTypeManagementAreaCurrencyToWorkOrderItem'.
2025-07-20 17:46:37.790 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Common') IS NULL EXEC(N'CREATE SCHEMA [Common];');
2025-07-20 17:46:37.792 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'HR') IS NULL EXEC(N'CREATE SCHEMA [HR];');
2025-07-20 17:46:37.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Client') IS NULL EXEC(N'CREATE SCHEMA [Client];');
2025-07-20 17:46:37.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Resource') IS NULL EXEC(N'CREATE SCHEMA [Resource];');
2025-07-20 17:46:37.796 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Analytics') IS NULL EXEC(N'CREATE SCHEMA [Analytics];');
2025-07-20 17:46:37.796 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Document') IS NULL EXEC(N'CREATE SCHEMA [Document];');
2025-07-20 17:46:37.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'Auth') IS NULL EXEC(N'CREATE SCHEMA [Auth];');
2025-07-20 17:46:37.803 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Common].[ActivityLogs] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Action] nvarchar(50) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NOT NULL,
    [EntityName] nvarchar(100) NOT NULL,
    [Details] nvarchar(1000) NOT NULL,
    [IpAddress] nvarchar(50) NOT NULL,
    [UserAgent] nvarchar(500) NOT NULL,
    [Location] nvarchar(100) NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ActivityLogs] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.910 +03:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [EquipmentStatus] (
    [Id] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_EquipmentStatus] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.913 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MaintenanceStatus] (
    [Id] uniqueidentifier NOT NULL,
    [IsFinalState] bit NOT NULL,
    [AllowsEditing] bit NOT NULL,
    [ColorCode] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MaintenanceStatus] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.919 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MaintenanceType] (
    [Id] uniqueidentifier NOT NULL,
    [IsScheduled] bit NOT NULL,
    [RequiresOutOfService] bit NOT NULL,
    [TypicalDurationHours] int NULL,
    [TypicalIntervalDays] int NULL,
    [ColorCode] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MaintenanceType] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.924 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [MaterialType] (
    [Id] uniqueidentifier NOT NULL,
    [IsPurchasable] bit NOT NULL,
    [IsReceivable] bit NOT NULL,
    [RequiresTracking] bit NOT NULL,
    [HasCost] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_MaterialType] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.928 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PriorityLevel] (
    [Id] uniqueidentifier NOT NULL,
    [SeverityValue] int NOT NULL,
    [ColorCode] nvarchar(max) NOT NULL,
    [TargetResponseHours] int NULL,
    [RequiresImmediateNotification] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PriorityLevel] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.930 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Auth].[Roles] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [NormalizedName] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Skills] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Category] nvarchar(50) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Skills] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SupplierCategory] (
    [Id] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_SupplierCategory] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.940 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Auth].[Users] (
    [Id] uniqueidentifier NOT NULL,
    [UserName] nvarchar(50) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [PasswordHash] nvarchar(200) NOT NULL,
    [FullName] nvarchar(100) NOT NULL,
    [Avatar] nvarchar(500) NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [IsEmployee] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EmployeeId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.944 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderStatus] (
    [Id] uniqueidentifier NOT NULL,
    [IsCompleted] bit NOT NULL,
    [AllowsEditing] bit NOT NULL,
    [RequiresApproval] bit NOT NULL,
    [ColorCode] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [DisplayOrder] int NOT NULL,
    [Metadata] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_WorkOrderStatus] PRIMARY KEY ([Id])
);
2025-07-20 17:46:37.947 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Auth].[Permissions] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [NormalizedName] nvarchar(100) NOT NULL,
    [Description] nvarchar(200) NOT NULL,
    [Module] nvarchar(50) NOT NULL,
    [Action] nvarchar(50) NOT NULL,
    [RoleId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Permissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Permissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Auth].[Roles] ([Id])
);
2025-07-20 17:46:37.951 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[Supplier] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [CategoryId] uniqueidentifier NULL,
    [Name] nvarchar(100) NOT NULL,
    [ContactPerson] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NOT NULL,
    [AlternatePhone] nvarchar(20) NOT NULL,
    [Street] nvarchar(200) NOT NULL,
    [City] nvarchar(100) NOT NULL,
    [State] nvarchar(100) NOT NULL,
    [PostalCode] nvarchar(20) NOT NULL,
    [Country] nvarchar(100) NOT NULL,
    [Address_FormattedAddress] nvarchar(max) NOT NULL,
    [Address_Latitude] float NULL,
    [Address_Longitude] float NULL,
    [Website] nvarchar(200) NOT NULL,
    [VatNumber] nvarchar(50) NOT NULL,
    [PaymentTerms] nvarchar(100) NOT NULL,
    [BankAccount] nvarchar(50) NOT NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Notes] nvarchar(1000) NOT NULL,
    [Rating] decimal(3,2) NOT NULL DEFAULT 0.0,
    [SupplierCategoryId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Supplier] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Supplier_SupplierCategory_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [SupplierCategory] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Supplier_SupplierCategory_SupplierCategoryId] FOREIGN KEY ([SupplierCategoryId]) REFERENCES [SupplierCategory] ([Id])
);
2025-07-20 17:46:37.956 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Common].[Attachments] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [FileName] nvarchar(255) NOT NULL,
    [FileType] nvarchar(100) NOT NULL,
    [FileSize] bigint NOT NULL,
    [Url] nvarchar(1000) NOT NULL,
    [UploadedById] uniqueidentifier NOT NULL,
    [UploadDate] datetime2 NOT NULL DEFAULT (GETDATE()),
    [Description] nvarchar(500) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Attachments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Attachments_Users_UploadedById] FOREIGN KEY ([UploadedById]) REFERENCES [Auth].[Users] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:37.960 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Client].[Client] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [CompanyName] nvarchar(100) NOT NULL,
    [ContactPerson] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NOT NULL,
    [AlternatePhone] nvarchar(20) NOT NULL,
    [Street] nvarchar(200) NOT NULL,
    [City] nvarchar(100) NOT NULL,
    [State] nvarchar(100) NOT NULL,
    [PostalCode] nvarchar(20) NOT NULL,
    [Country] nvarchar(100) NOT NULL,
    [Address_FormattedAddress] nvarchar(max) NOT NULL,
    [Address_Latitude] float NULL,
    [Address_Longitude] float NULL,
    [Website] nvarchar(200) NOT NULL,
    [Industry] nvarchar(100) NOT NULL,
    [VatNumber] nvarchar(50) NOT NULL,
    [LogoUrl] nvarchar(500) NOT NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Notes] nvarchar(1000) NOT NULL,
    [AccountManagerId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Client] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Client_Users_AccountManagerId] FOREIGN KEY ([AccountManagerId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE SET NULL
);
2025-07-20 17:46:37.965 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Analytics].[Dashboard] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Module] nvarchar(50) NOT NULL,
    [IsDefault] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsSystem] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsPublic] bit NOT NULL DEFAULT CAST(0 AS bit),
    [OwnerId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Dashboard] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Dashboard_Users_OwnerId] FOREIGN KEY ([OwnerId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE SET NULL
);
2025-07-20 17:46:37.971 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Document].[DocumentTemplate] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [ContentType] nvarchar(50) NOT NULL,
    [TemplateUrl] nvarchar(500) NOT NULL,
    [TemplateContent] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Version] int NOT NULL DEFAULT 1,
    [CreatedById] uniqueidentifier NOT NULL,
    [LastModifiedById] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_DocumentTemplate] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_DocumentTemplate_Users_CreatedById] FOREIGN KEY ([CreatedById]) REFERENCES [Auth].[Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_DocumentTemplate_Users_LastModifiedById] FOREIGN KEY ([LastModifiedById]) REFERENCES [Auth].[Users] ([Id]) ON DELETE SET NULL
);
2025-07-20 17:46:37.976 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Common].[Notifications] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Title] nvarchar(100) NOT NULL,
    [Content] nvarchar(1000) NOT NULL,
    [Type] nvarchar(20) NOT NULL,
    [EntityType] nvarchar(100) NOT NULL,
    [EntityId] uniqueidentifier NULL,
    [Url] nvarchar(500) NOT NULL,
    [IsRead] bit NOT NULL DEFAULT CAST(0 AS bit),
    [ReadDate] datetime2 NULL,
    [UserId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:37.982 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Auth].[UserRoles] (
    [UserId] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [Id] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Auth].[Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:37.986 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [RolePermission] (
    [Id] uniqueidentifier NOT NULL,
    [RoleId] uniqueidentifier NOT NULL,
    [PermissionId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_RolePermission] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermission_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Auth].[Permissions] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_RolePermission_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Auth].[Roles] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:37.994 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[PurchasableMaterial] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [SupplierId] uniqueidentifier NULL,
    [MaterialTypeId] uniqueidentifier NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Quantity] decimal(18,2) NOT NULL,
    [Unit] nvarchar(20) NOT NULL DEFAULT N'Units',
    [UnitCost] decimal(18,2) NULL,
    [TotalCost] decimal(18,2) NULL,
    [Status] nvarchar(20) NOT NULL DEFAULT N'Pending',
    [SupplierName] nvarchar(100) NOT NULL,
    [OrderDate] datetime2 NULL,
    [DeliveryDate] datetime2 NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_PurchasableMaterial] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PurchasableMaterial_MaterialType_MaterialTypeId] FOREIGN KEY ([MaterialTypeId]) REFERENCES [MaterialType] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_PurchasableMaterial_Supplier_SupplierId] FOREIGN KEY ([SupplierId]) REFERENCES [Resource].[Supplier] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.000 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Client].[ClientContact] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Position] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Phone] nvarchar(20) NOT NULL,
    [AlternatePhone] nvarchar(20) NOT NULL,
    [IsPrimaryContact] bit NOT NULL DEFAULT CAST(0 AS bit),
    [Notes] nvarchar(1000) NOT NULL,
    [ClientId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ClientContact] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientContact_Client_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Client].[Client] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.005 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[ClientMaterials] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [GroupCode] nvarchar(50) NOT NULL,
    [SEQ] nvarchar(50) NOT NULL,
    [MaterialMasterCode] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Unit] nvarchar(50) NOT NULL,
    [ClientId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ClientMaterials] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientMaterials_Client_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Client].[Client] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.009 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrders] (
    [Id] uniqueidentifier NOT NULL,
    [WorkOrderNumber] nvarchar(50) NOT NULL,
    [InternalOrderNumber] nvarchar(50) NOT NULL,
    [Title] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Location] nvarchar(200) NOT NULL,
    [Category] nvarchar(100) NULL,
    [Type] nvarchar(max) NULL,
    [Class] nvarchar(max) NULL,
    [CompletionPercentage] decimal(5,2) NOT NULL,
    [ReceivedDate] datetime2 NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [TargetEndDate] datetime2 NULL,
    [EstimatedCost] decimal(18,2) NULL,
    [WorkOrderStatusId] uniqueidentifier NOT NULL,
    [PriorityLevelId] uniqueidentifier NOT NULL,
    [ClientId] uniqueidentifier NULL,
    [EngineerInChargeId] uniqueidentifier NULL,
    [MaterialsExpense] decimal(18,2) NOT NULL,
    [LaborExpense] decimal(18,2) NOT NULL,
    [OtherExpense] decimal(18,2) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrders] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrders_Client_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Client].[Client] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_WorkOrders_PriorityLevel_PriorityLevelId] FOREIGN KEY ([PriorityLevelId]) REFERENCES [PriorityLevel] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_WorkOrders_Users_EngineerInChargeId] FOREIGN KEY ([EngineerInChargeId]) REFERENCES [Auth].[Users] ([Id]),
    CONSTRAINT [FK_WorkOrders_WorkOrderStatus_WorkOrderStatusId] FOREIGN KEY ([WorkOrderStatusId]) REFERENCES [WorkOrderStatus] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.014 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Analytics].[DashboardUser] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [DashboardId] uniqueidentifier NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [CanEdit] bit NOT NULL DEFAULT CAST(0 AS bit),
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_DashboardUser] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_DashboardUser_Dashboard_DashboardId] FOREIGN KEY ([DashboardId]) REFERENCES [Analytics].[Dashboard] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_DashboardUser_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.020 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Analytics].[DashboardWidget] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Title] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [ChartType] nvarchar(50) NOT NULL,
    [DataSource] nvarchar(200) NOT NULL,
    [Configuration] nvarchar(max) NOT NULL,
    [Width] int NOT NULL DEFAULT 4,
    [Height] int NOT NULL DEFAULT 300,
    [Position] int NOT NULL DEFAULT 0,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [DashboardId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_DashboardWidget] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_DashboardWidget_Dashboard_DashboardId] FOREIGN KEY ([DashboardId]) REFERENCES [Analytics].[Dashboard] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.027 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Analytics].[Report] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [Query] nvarchar(max) NOT NULL,
    [Parameters] nvarchar(max) NOT NULL,
    [ExportFormats] nvarchar(200) NOT NULL,
    [IsSystem] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsPublic] bit NOT NULL DEFAULT CAST(0 AS bit),
    [CreatedByUserId] uniqueidentifier NULL,
    [TemplateId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Report] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Report_DocumentTemplate_TemplateId] FOREIGN KEY ([TemplateId]) REFERENCES [Document].[DocumentTemplate] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Report_Users_CreatedByUserId] FOREIGN KEY ([CreatedByUserId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE SET NULL
);
2025-07-20 17:46:38.033 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ActionNeeded] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Priority] int NOT NULL,
    [DueDate] datetime2 NOT NULL,
    [IsCompleted] bit NOT NULL,
    [CompletedDate] datetime2 NULL,
    [Notes] nvarchar(500) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [AssignedToId] uniqueidentifier NULL,
    [CompletedById] uniqueidentifier NULL,
    [WorkOrderId1] uniqueidentifier NOT NULL,
    [PriorityLevelId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ActionNeeded] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ActionNeeded_PriorityLevel_PriorityLevelId] FOREIGN KEY ([PriorityLevelId]) REFERENCES [PriorityLevel] ([Id]),
    CONSTRAINT [FK_ActionNeeded_Users_AssignedToId] FOREIGN KEY ([AssignedToId]) REFERENCES [Auth].[Users] ([Id]),
    CONSTRAINT [FK_ActionNeeded_Users_CompletedById] FOREIGN KEY ([CompletedById]) REFERENCES [Auth].[Users] ([Id]),
    CONSTRAINT [FK_ActionNeeded_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ActionNeeded_WorkOrders_WorkOrderId1] FOREIGN KEY ([WorkOrderId1]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.038 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permits] (
    [Id] uniqueidentifier NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Number] nvarchar(50) NOT NULL,
    [IssueDate] datetime2 NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [Status] int NOT NULL,
    [IssuedBy] nvarchar(100) NOT NULL,
    [Authority] nvarchar(100) NOT NULL,
    [DocumentRef] nvarchar(200) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Permits] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Permits_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.043 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SiteReports] (
    [Id] uniqueidentifier NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [ForemanId] uniqueidentifier NOT NULL,
    [ForemanName] nvarchar(100) NOT NULL,
    [Status] int NOT NULL,
    [WorkDone] nvarchar(500) NOT NULL,
    [ActualQuantity] decimal(18,2) NULL,
    [Date] datetime2 NOT NULL,
    [Notes] nvarchar(1000) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_SiteReports] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_SiteReports_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.047 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderActions] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Status] int NOT NULL,
    [Priority] int NOT NULL,
    [AssignedToId] uniqueidentifier NOT NULL,
    [DueDate] datetime2 NOT NULL,
    [CompletedDate] datetime2 NULL,
    [CompletedById] uniqueidentifier NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [PriorityLevelId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderActions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderActions_PriorityLevel_PriorityLevelId] FOREIGN KEY ([PriorityLevelId]) REFERENCES [PriorityLevel] ([Id]),
    CONSTRAINT [FK_WorkOrderActions_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.052 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderExpenses] (
    [Id] uniqueidentifier NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [Category] nvarchar(100) NOT NULL,
    [Date] datetime2 NOT NULL,
    [SubmittedById] uniqueidentifier NOT NULL,
    [Status] int NOT NULL,
    [ApprovedById] uniqueidentifier NULL,
    [ApprovedDate] datetime2 NULL,
    [Receipt] nvarchar(500) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderExpenses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderExpenses_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.056 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderForms] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Type] int NOT NULL,
    [Status] int NOT NULL,
    [SubmittedDate] datetime2 NULL,
    [SubmittedById] uniqueidentifier NULL,
    [Url] nvarchar(500) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderForms] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderForms_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.060 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderInvoices] (
    [Id] uniqueidentifier NOT NULL,
    [Number] nvarchar(50) NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [Currency] nvarchar(10) NOT NULL,
    [IssueDate] datetime2 NOT NULL,
    [DueDate] datetime2 NOT NULL,
    [Status] int NOT NULL,
    [PaidDate] datetime2 NULL,
    [PaidById] uniqueidentifier NULL,
    [Url] nvarchar(500) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderInvoices] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderInvoices_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.065 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderIssues] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [Description] nvarchar(1000) NOT NULL,
    [Priority] int NOT NULL,
    [Status] int NOT NULL,
    [Severity] int NOT NULL,
    [ReportedById] uniqueidentifier NOT NULL,
    [ReportedDate] datetime2 NOT NULL,
    [AssignedToId] uniqueidentifier NULL,
    [ResolutionDate] datetime2 NULL,
    [ResolutionNotes] nvarchar(max) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [PriorityLevelId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderIssues] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderIssues_PriorityLevel_PriorityLevelId] FOREIGN KEY ([PriorityLevelId]) REFERENCES [PriorityLevel] ([Id]),
    CONSTRAINT [FK_WorkOrderIssues_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.068 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderItems] (
    [Id] uniqueidentifier NOT NULL,
    [ItemNumber] nvarchar(50) NOT NULL,
    [Description] nvarchar(1000) NOT NULL,
    [Unit] nvarchar(50) NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [EstimatedQuantity] decimal(18,2) NOT NULL,
    [EstimatedPrice] decimal(18,2) NOT NULL,
    [EstimatedPriceWithVAT] decimal(18,2) NOT NULL,
    [ActualQuantity] decimal(18,2) NOT NULL,
    [ActualPrice] decimal(18,2) NOT NULL,
    [ActualPriceWithVAT] decimal(18,2) NOT NULL,
    [ReasonForFinalQuantity] nvarchar(500) NOT NULL,
    [PaymentType] nvarchar(max) NOT NULL,
    [ManagementArea] nvarchar(max) NOT NULL,
    [Currency] nvarchar(max) NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(50) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(50) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderItems_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.071 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderPhotos] (
    [Id] uniqueidentifier NOT NULL,
    [Url] nvarchar(500) NOT NULL,
    [Caption] nvarchar(200) NOT NULL,
    [UploadedDate] datetime2 NOT NULL,
    [UploadedById] uniqueidentifier NOT NULL,
    [Type] int NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderPhotos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderPhotos_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.074 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderRemarks] (
    [Id] uniqueidentifier NOT NULL,
    [Content] nvarchar(1000) NOT NULL,
    [Type] int NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [PeopleInvolved] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderRemarks] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderRemarks_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.078 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [WorkOrderTasks] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(200) NOT NULL,
    [Description] nvarchar(1000) NOT NULL,
    [StartDate] datetime2 NULL,
    [DueDate] datetime2 NULL,
    [Priority] int NOT NULL,
    [Status] int NOT NULL,
    [Completed] bit NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [ConfirmedById] uniqueidentifier NULL,
    [PriorityLevelId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkOrderTasks] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkOrderTasks_PriorityLevel_PriorityLevelId] FOREIGN KEY ([PriorityLevelId]) REFERENCES [PriorityLevel] ([Id]),
    CONSTRAINT [FK_WorkOrderTasks_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.081 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SiteReportPhotos] (
    [Id] uniqueidentifier NOT NULL,
    [SiteReportId] uniqueidentifier NOT NULL,
    [Url] nvarchar(500) NOT NULL,
    [Caption] nvarchar(200) NOT NULL,
    [Category] nvarchar(50) NOT NULL,
    [UploadedDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_SiteReportPhotos] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_SiteReportPhotos_SiteReports_SiteReportId] FOREIGN KEY ([SiteReportId]) REFERENCES [SiteReports] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.085 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Allowances] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [SalaryId] uniqueidentifier NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [IsTaxable] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EffectiveDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Allowances] PRIMARY KEY ([Id])
);
2025-07-20 17:46:38.090 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Attendances] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EmployeeId] uniqueidentifier NOT NULL,
    [Date] datetime2 NOT NULL DEFAULT (GETDATE()),
    [CheckInTime] datetime2 NULL,
    [CheckOutTime] datetime2 NULL,
    [WorkingHours] time(5) NULL,
    [LateMinutes] time(5) NULL,
    [EarlyDepartureMinutes] time(5) NULL,
    [OvertimeHours] time(5) NULL,
    [Notes] nvarchar(500) NOT NULL,
    [IsAbsent] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsHalfDay] bit NOT NULL DEFAULT CAST(0 AS bit),
    [IsOnLeave] bit NOT NULL DEFAULT CAST(0 AS bit),
    [LeaveId] uniqueidentifier NULL,
    [CheckInLocation] nvarchar(200) NOT NULL,
    [CheckOutLocation] nvarchar(200) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Attendances] PRIMARY KEY ([Id])
);
2025-07-20 17:46:38.093 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[BankAccounts] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EmployeeId] uniqueidentifier NOT NULL,
    [BankName] nvarchar(100) NOT NULL,
    [AccountNumber] nvarchar(50) NOT NULL,
    [IBAN] nvarchar(50) NOT NULL,
    [SwiftCode] nvarchar(20) NOT NULL,
    [BranchName] nvarchar(100) NOT NULL,
    [BranchCode] nvarchar(20) NOT NULL,
    [IsPrimary] bit NOT NULL DEFAULT CAST(0 AS bit),
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_BankAccounts] PRIMARY KEY ([Id])
);
2025-07-20 17:46:38.098 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Certificates] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Issuer] nvarchar(100) NOT NULL,
    [IssueDate] datetime2 NOT NULL,
    [ExpiryDate] datetime2 NULL,
    [DocumentUrl] nvarchar(500) NOT NULL,
    [Verified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Certificates] PRIMARY KEY ([Id])
);
2025-07-20 17:46:38.101 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Deductions] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [SalaryId] uniqueidentifier NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [IsMandatory] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EffectiveDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Deductions] PRIMARY KEY ([Id])
);
2025-07-20 17:46:38.106 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Department] (
    [Id] uniqueidentifier NOT NULL,
    [Name] nvarchar(max) NOT NULL,
    [Code] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ParentDepartmentId] uniqueidentifier NULL,
    [ManagerId] uniqueidentifier NULL,
    [Location] nvarchar(max) NOT NULL,
    [IsActive] bit NOT NULL,
    [HeadCount] int NOT NULL,
    [Budget] decimal(18,2) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Department] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Department_Department_ParentDepartmentId] FOREIGN KEY ([ParentDepartmentId]) REFERENCES [Department] ([Id])
);
2025-07-20 17:46:38.112 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Employees] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [BadgeNumber] nvarchar(20) NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Photo] nvarchar(500) NOT NULL,
    [JobTitle] nvarchar(100) NOT NULL,
    [WorkLocation] nvarchar(100) NOT NULL,
    [HomeStreet] nvarchar(200) NOT NULL,
    [HomeCity] nvarchar(100) NOT NULL,
    [HomeState] nvarchar(100) NOT NULL,
    [HomePostalCode] nvarchar(20) NOT NULL,
    [HomeCountry] nvarchar(100) NOT NULL,
    [HomeFormattedAddress] nvarchar(500) NOT NULL,
    [HomeLatitude] float NULL,
    [HomeLongitude] float NULL,
    [HomeType] nvarchar(20) NOT NULL,
    [CompanyPhone] nvarchar(20) NOT NULL,
    [PersonalPhone] nvarchar(20) NOT NULL,
    [IqamaNumber] nvarchar(20) NOT NULL,
    [Age] int NOT NULL,
    [Nationality] nvarchar(50) NOT NULL,
    [DirectManagerId] uniqueidentifier NULL,
    [DepartmentId] uniqueidentifier NULL,
    [WorkTimeRatio] float(5) NOT NULL,
    [MonthlyHours] int NOT NULL,
    [AvgLateMinutes] float(5) NOT NULL,
    [JoinDate] datetime2 NOT NULL,
    [CurrentProject] nvarchar(100) NOT NULL,
    [SickLeaveCounter] int NOT NULL,
    [OffDays] int NOT NULL,
    [SalaryAmount] decimal(18,2) NOT NULL,
    [SalaryCurrency] nvarchar(3) NOT NULL DEFAULT N'SAR',
    [IsActive] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Employees] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Employees_Department_DepartmentId] FOREIGN KEY ([DepartmentId]) REFERENCES [Department] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Employees_Employees_DirectManagerId] FOREIGN KEY ([DirectManagerId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.117 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Educations] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Institution] nvarchar(100) NOT NULL,
    [Degree] nvarchar(100) NOT NULL,
    [FieldOfStudy] nvarchar(100) NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [Description] nvarchar(1000) NOT NULL,
    [DocumentUrl] nvarchar(500) NOT NULL,
    [IsVerified] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Educations] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Educations_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.121 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[EmergencyContacts] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Relationship] nvarchar(50) NOT NULL,
    [PrimaryPhone] nvarchar(20) NOT NULL,
    [SecondaryPhone] nvarchar(20) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [AddressStreet] nvarchar(200) NOT NULL,
    [AddressCity] nvarchar(100) NOT NULL,
    [AddressState] nvarchar(100) NOT NULL,
    [AddressPostalCode] nvarchar(20) NOT NULL,
    [AddressCountry] nvarchar(100) NOT NULL,
    [AddressFormattedAddress] nvarchar(500) NOT NULL,
    [AddressLatitude] float NULL,
    [AddressLongitude] float NULL,
    [IsPrimaryContact] bit NOT NULL DEFAULT CAST(0 AS bit),
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_EmergencyContacts] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_EmergencyContacts_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.126 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[EmployeeSkills] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EmployeeId] uniqueidentifier NOT NULL,
    [SkillId] uniqueidentifier NOT NULL,
    [ProficiencyLevel] int NOT NULL,
    [AcquiredDate] datetime2 NOT NULL,
    [Certificate] nvarchar(255) NOT NULL,
    [Notes] nvarchar(500) NOT NULL,
    [LastUsedDate] datetime2 NULL,
    [IsFeatured] bit NOT NULL DEFAULT CAST(0 AS bit),
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_EmployeeSkills] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_EmployeeSkills_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_EmployeeSkills_Skills_SkillId] FOREIGN KEY ([SkillId]) REFERENCES [HR].[Skills] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.131 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Equipment] (
    [Id] uniqueidentifier NOT NULL,
    [EquipmentStatusId] uniqueidentifier NOT NULL,
    [CurrentOperatorId] uniqueidentifier NULL,
    [SupplierId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Equipment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Equipment_Employees_CurrentOperatorId] FOREIGN KEY ([CurrentOperatorId]) REFERENCES [HR].[Employees] ([Id]),
    CONSTRAINT [FK_Equipment_EquipmentStatus_EquipmentStatusId] FOREIGN KEY ([EquipmentStatusId]) REFERENCES [EquipmentStatus] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Equipment_Supplier_SupplierId] FOREIGN KEY ([SupplierId]) REFERENCES [Resource].[Supplier] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.136 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Identifications] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Type] nvarchar(50) NOT NULL,
    [Number] nvarchar(50) NOT NULL,
    [IssuingCountry] nvarchar(50) NOT NULL,
    [IssueDate] datetime2 NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [DocumentUrl] nvarchar(500) NOT NULL,
    [IsVerified] bit NOT NULL,
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Identifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Identifications_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.141 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Leaves] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Type] nvarchar(20) NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [TotalDays] int NOT NULL DEFAULT 0,
    [Reason] nvarchar(500) NOT NULL,
    [Status] nvarchar(20) NOT NULL DEFAULT N'Pending',
    [Comments] nvarchar(1000) NOT NULL,
    [ApprovedById] uniqueidentifier NULL,
    [ApprovedDate] datetime2 NULL,
    [RejectionReason] nvarchar(500) NOT NULL,
    [DocumentUrl] nvarchar(500) NOT NULL,
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Leaves] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Leaves_Employees_ApprovedById] FOREIGN KEY ([ApprovedById]) REFERENCES [HR].[Employees] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Leaves_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.147 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[ManpowerAssignment] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [UserId] uniqueidentifier NULL,
    [EmployeeId] uniqueidentifier NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [BadgeNumber] nvarchar(20) NOT NULL,
    [Name] nvarchar(100) NOT NULL,
    [Role] nvarchar(50) NOT NULL,
    [HoursAssigned] int NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [Notes] nvarchar(1000) NOT NULL,
    [WorkOrderNumber] nvarchar(50) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ManpowerAssignment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ManpowerAssignment_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_ManpowerAssignment_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Auth].[Users] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_ManpowerAssignment_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.153 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[PerformanceReviews] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Title] nvarchar(100) NOT NULL,
    [ReviewPeriodStart] datetime2 NOT NULL,
    [ReviewPeriodEnd] datetime2 NOT NULL,
    [DueDate] datetime2 NOT NULL,
    [CompletionDate] datetime2 NULL,
    [OverallRating] int NOT NULL,
    [ManagerComments] nvarchar(1000) NOT NULL,
    [EmployeeComments] nvarchar(1000) NOT NULL,
    [GoalsForNextPeriod] nvarchar(1000) NOT NULL,
    [TrainingRecommendations] nvarchar(1000) NOT NULL,
    [Status] nvarchar(50) NOT NULL DEFAULT N'Draft',
    [EmployeeId] uniqueidentifier NOT NULL,
    [ReviewerId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_PerformanceReviews] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PerformanceReviews_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_PerformanceReviews_Employees_ReviewerId] FOREIGN KEY ([ReviewerId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.160 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[ReceivableMaterials] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Status] nvarchar(50) NOT NULL,
    [ReceivedDate] datetime2 NULL,
    [ReturnedDate] datetime2 NULL,
    [ReceivedById] uniqueidentifier NULL,
    [ReturnedById] uniqueidentifier NULL,
    [WorkOrderId] uniqueidentifier NULL,
    [MaterialTypeId] uniqueidentifier NULL,
    [ClientMaterialId] uniqueidentifier NULL,
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Unit] nvarchar(50) NOT NULL,
    [EstimatedQuantity] decimal(18,2) NOT NULL,
    [ReceivedQuantity] decimal(18,2) NULL,
    [ActualQuantity] decimal(18,2) NULL,
    [RemainingQuantity] decimal(18,2) NULL,
    [ReturnedQuantity] decimal(18,2) NULL,
    [SourceLocation] nvarchar(200) NOT NULL,
    [Notes] nvarchar(1000) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_ReceivableMaterials] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReceivableMaterials_ClientMaterials_ClientMaterialId] FOREIGN KEY ([ClientMaterialId]) REFERENCES [Resource].[ClientMaterials] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ReceivableMaterials_Employees_ReceivedById] FOREIGN KEY ([ReceivedById]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ReceivableMaterials_Employees_ReturnedById] FOREIGN KEY ([ReturnedById]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ReceivableMaterials_MaterialType_MaterialTypeId] FOREIGN KEY ([MaterialTypeId]) REFERENCES [MaterialType] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ReceivableMaterials_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.166 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Salaries] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EmployeeId] uniqueidentifier NOT NULL,
    [BaseSalary] decimal(18,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL,
    [EffectiveDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [Notes] nvarchar(500) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Salaries] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Salaries_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.172 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[Trainings] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EmployeeId] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Description] nvarchar(1000) NOT NULL,
    [Provider] nvarchar(100) NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NOT NULL,
    [DurationHours] int NOT NULL,
    [Location] nvarchar(100) NOT NULL,
    [Cost] decimal(18,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL DEFAULT N'SAR',
    [Status] nvarchar(20) NOT NULL,
    [CertificateUrl] nvarchar(500) NOT NULL,
    [Score] int NULL,
    [Feedback] nvarchar(1000) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_Trainings] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Trainings_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.178 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[WorkExperiences] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [CompanyName] nvarchar(100) NOT NULL,
    [Position] nvarchar(100) NOT NULL,
    [JobDescription] nvarchar(1000) NOT NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [Location] nvarchar(100) NOT NULL,
    [IsCurrentEmployer] bit NOT NULL DEFAULT CAST(0 AS bit),
    [ContactReference] nvarchar(100) NOT NULL,
    [ContactReferencePhone] nvarchar(20) NOT NULL,
    [ContactReferenceEmail] nvarchar(100) NOT NULL,
    [Achievements] nvarchar(1000) NOT NULL,
    [ReasonForLeaving] nvarchar(500) NOT NULL,
    [EmployeeId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_WorkExperiences] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_WorkExperiences_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.184 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[EquipmentAssignment] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [EquipmentId] uniqueidentifier NOT NULL,
    [WorkOrderId] uniqueidentifier NOT NULL,
    [OperatorId] uniqueidentifier NULL,
    [StartDate] datetime2 NOT NULL,
    [EndDate] datetime2 NULL,
    [Notes] nvarchar(1000) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_EquipmentAssignment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_EquipmentAssignment_Employees_OperatorId] FOREIGN KEY ([OperatorId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_EquipmentAssignment_Equipment_EquipmentId] FOREIGN KEY ([EquipmentId]) REFERENCES [Equipment] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_EquipmentAssignment_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.191 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[EquipmentMaintenance] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [MaintenanceTypeId] uniqueidentifier NOT NULL,
    [MaintenanceStatusId] uniqueidentifier NOT NULL,
    [EquipmentId] uniqueidentifier NOT NULL,
    [PerformedById] uniqueidentifier NULL,
    [Description] nvarchar(1000) NOT NULL,
    [ScheduledDate] datetime2 NOT NULL,
    [CompletedDate] datetime2 NULL,
    [Cost] decimal(18,2) NOT NULL,
    [Currency] nvarchar(3) NOT NULL DEFAULT N'SAR',
    [Notes] nvarchar(1000) NOT NULL,
    [ServiceProvider] nvarchar(100) NOT NULL,
    [InvoiceNumber] nvarchar(100) NOT NULL,
    [DocumentUrl] nvarchar(500) NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_EquipmentMaintenance] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_EquipmentMaintenance_Employees_PerformedById] FOREIGN KEY ([PerformedById]) REFERENCES [HR].[Employees] ([Id]),
    CONSTRAINT [FK_EquipmentMaintenance_Equipment_EquipmentId] FOREIGN KEY ([EquipmentId]) REFERENCES [Equipment] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_EquipmentMaintenance_MaintenanceStatus_MaintenanceStatusId] FOREIGN KEY ([MaintenanceStatusId]) REFERENCES [MaintenanceStatus] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_EquipmentMaintenance_MaintenanceType_MaintenanceTypeId] FOREIGN KEY ([MaintenanceTypeId]) REFERENCES [MaintenanceType] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.197 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [HR].[PerformanceCriteria] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [Name] nvarchar(100) NOT NULL,
    [Description] nvarchar(500) NOT NULL,
    [Rating] int NOT NULL,
    [Comments] nvarchar(1000) NOT NULL,
    [Weight] int NOT NULL DEFAULT 0,
    [PerformanceReviewId] uniqueidentifier NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_PerformanceCriteria] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_PerformanceCriteria_PerformanceReviews_PerformanceReviewId] FOREIGN KEY ([PerformanceReviewId]) REFERENCES [HR].[PerformanceReviews] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.203 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Resource].[MaterialAssignment] (
    [Id] uniqueidentifier NOT NULL DEFAULT (NEWSEQUENTIALID()),
    [MaterialType] nvarchar(450) NOT NULL,
    [PurchasableMaterialId] uniqueidentifier NULL,
    [ReceivableMaterialId] uniqueidentifier NULL,
    [WorkOrderId] uniqueidentifier NULL,
    [AssignedById] uniqueidentifier NOT NULL,
    [AssignDate] datetime2 NOT NULL,
    [StoringLocation] nvarchar(200) NOT NULL,
    [WorkOrderNumber] nvarchar(50) NOT NULL,
    [Quantity] decimal(18,2) NOT NULL,
    [Unit] nvarchar(20) NOT NULL DEFAULT N'Units',
    [Notes] nvarchar(1000) NOT NULL,
    [MaterialTypeId] uniqueidentifier NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETUTCDATE()),
    [CreatedBy] nvarchar(100) NOT NULL,
    [LastModifiedAt] datetime2 NULL DEFAULT (GETUTCDATE()),
    [LastModifiedBy] nvarchar(100) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_MaterialAssignment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_MaterialAssignment_Employees_AssignedById] FOREIGN KEY ([AssignedById]) REFERENCES [HR].[Employees] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MaterialAssignment_MaterialType_MaterialTypeId] FOREIGN KEY ([MaterialTypeId]) REFERENCES [MaterialType] ([Id]),
    CONSTRAINT [FK_MaterialAssignment_PurchasableMaterial_PurchasableMaterialId] FOREIGN KEY ([PurchasableMaterialId]) REFERENCES [Resource].[PurchasableMaterial] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MaterialAssignment_ReceivableMaterials_ReceivableMaterialId] FOREIGN KEY ([ReceivableMaterialId]) REFERENCES [Resource].[ReceivableMaterials] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_MaterialAssignment_WorkOrders_WorkOrderId] FOREIGN KEY ([WorkOrderId]) REFERENCES [WorkOrders] ([Id]) ON DELETE NO ACTION
);
2025-07-20 17:46:38.208 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SiteReportMaterialsUsed] (
    [Id] uniqueidentifier NOT NULL,
    [SiteReportId] uniqueidentifier NOT NULL,
    [MaterialAssignmentId] uniqueidentifier NOT NULL,
    [MaterialName] nvarchar(200) NOT NULL,
    [Quantity] decimal(18,2) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [CreatedBy] nvarchar(max) NOT NULL,
    [LastModifiedAt] datetime2 NULL,
    [LastModifiedBy] nvarchar(max) NOT NULL,
    [IsDeleted] bit NOT NULL,
    CONSTRAINT [PK_SiteReportMaterialsUsed] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_SiteReportMaterialsUsed_MaterialAssignment_MaterialAssignmentId] FOREIGN KEY ([MaterialAssignmentId]) REFERENCES [Resource].[MaterialAssignment] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_SiteReportMaterialsUsed_SiteReports_SiteReportId] FOREIGN KEY ([SiteReportId]) REFERENCES [SiteReports] ([Id]) ON DELETE CASCADE
);
2025-07-20 17:46:38.256 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountManagerId', N'AlternatePhone', N'CompanyName', N'ContactPerson', N'CreatedAt', N'CreatedBy', N'Email', N'Industry', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'LogoUrl', N'Name', N'Notes', N'Phone', N'VatNumber', N'Website', N'City', N'Country', N'Address_FormattedAddress', N'Address_Latitude', N'Address_Longitude', N'PostalCode', N'State', N'Street') AND [object_id] = OBJECT_ID(N'[Client].[Client]'))
    SET IDENTITY_INSERT [Client].[Client] ON;
INSERT INTO [Client].[Client] ([Id], [AccountManagerId], [AlternatePhone], [CompanyName], [ContactPerson], [CreatedAt], [CreatedBy], [Email], [Industry], [IsActive], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [LogoUrl], [Name], [Notes], [Phone], [VatNumber], [Website], [City], [Country], [Address_FormattedAddress], [Address_Latitude], [Address_Longitude], [PostalCode], [State], [Street])
VALUES ('cccccccc-cccc-cccc-cccc-cccccccccccc', NULL, N'0987654321', N'Demo Company', N'John Doe', '2024-07-20T12:00:00.0000000Z', N'seed', N'demo.client@example.com', N'Construction', CAST(1 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'seed', N'', N'Demo Client', N'Seeded client for demo work orders', N'1234567890', N'VAT123456', N'www.demo.com', N'Riyadh', N'Saudi Arabia', N'Demo Street, Riyadh, Riyadh 12345, Saudi Arabia', NULL, NULL, N'12345', N'Riyadh', N'Demo Street');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccountManagerId', N'AlternatePhone', N'CompanyName', N'ContactPerson', N'CreatedAt', N'CreatedBy', N'Email', N'Industry', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'LogoUrl', N'Name', N'Notes', N'Phone', N'VatNumber', N'Website', N'City', N'Country', N'Address_FormattedAddress', N'Address_Latitude', N'Address_Longitude', N'PostalCode', N'State', N'Street') AND [object_id] = OBJECT_ID(N'[Client].[Client]'))
    SET IDENTITY_INSERT [Client].[Client] OFF;
2025-07-20 17:46:38.308 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Action', N'CreatedAt', N'CreatedBy', N'Description', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Module', N'Name', N'NormalizedName', N'RoleId') AND [object_id] = OBJECT_ID(N'[Auth].[Permissions]'))
    SET IDENTITY_INSERT [Auth].[Permissions] ON;
INSERT INTO [Auth].[Permissions] ([Id], [Action], [CreatedAt], [CreatedBy], [Description], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [Module], [Name], [NormalizedName], [RoleId])
VALUES ('00000000-0000-0000-0000-000000000001', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.View', N'WORKORDER.VIEW', NULL),
('00000000-0000-0000-0000-000000000002', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Create', N'WORKORDER.CREATE', NULL),
('00000000-0000-0000-0000-000000000003', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Edit', N'WORKORDER.EDIT', NULL),
('00000000-0000-0000-0000-000000000004', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Delete', N'WORKORDER.DELETE', NULL),
('00000000-0000-0000-0000-000000000005', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Export', N'WORKORDER.EXPORT', NULL),
('00000000-0000-0000-0000-000000000006', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Approve', N'WORKORDER.APPROVE', NULL),
('00000000-0000-0000-0000-000000000007', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign workorders', CAST(0 AS bit), NULL, N'system', N'WorkOrder', N'WorkOrder.Assign', N'WORKORDER.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000008', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view users', CAST(0 AS bit), NULL, N'system', N'User', N'User.View', N'USER.VIEW', NULL),
('00000000-0000-0000-0000-000000000009', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Create', N'USER.CREATE', NULL),
('00000000-0000-0000-0000-000000000010', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Edit', N'USER.EDIT', NULL),
('00000000-0000-0000-0000-000000000011', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Delete', N'USER.DELETE', NULL),
('00000000-0000-0000-0000-000000000012', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Export', N'USER.EXPORT', NULL),
('00000000-0000-0000-0000-000000000013', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Approve', N'USER.APPROVE', NULL),
('00000000-0000-0000-0000-000000000014', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign users', CAST(0 AS bit), NULL, N'system', N'User', N'User.Assign', N'USER.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000015', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.View', N'ROLE.VIEW', NULL),
('00000000-0000-0000-0000-000000000016', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Create', N'ROLE.CREATE', NULL),
('00000000-0000-0000-0000-000000000017', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Edit', N'ROLE.EDIT', NULL),
('00000000-0000-0000-0000-000000000018', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Delete', N'ROLE.DELETE', NULL),
('00000000-0000-0000-0000-000000000019', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Export', N'ROLE.EXPORT', NULL),
('00000000-0000-0000-0000-000000000020', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Approve', N'ROLE.APPROVE', NULL),
('00000000-0000-0000-0000-000000000021', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign roles', CAST(0 AS bit), NULL, N'system', N'Role', N'Role.Assign', N'ROLE.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000022', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.View', N'HR.VIEW', NULL),
('00000000-0000-0000-0000-000000000023', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Create', N'HR.CREATE', NULL),
('00000000-0000-0000-0000-000000000024', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Edit', N'HR.EDIT', NULL),
('00000000-0000-0000-0000-000000000025', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Delete', N'HR.DELETE', NULL),
('00000000-0000-0000-0000-000000000026', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Export', N'HR.EXPORT', NULL),
('00000000-0000-0000-0000-000000000027', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Approve', N'HR.APPROVE', NULL),
('00000000-0000-0000-0000-000000000028', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign hrs', CAST(0 AS bit), NULL, N'system', N'HR', N'HR.Assign', N'HR.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000029', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.View', N'EQUIPMENT.VIEW', NULL),
('00000000-0000-0000-0000-000000000030', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Create', N'EQUIPMENT.CREATE', NULL),
('00000000-0000-0000-0000-000000000031', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Edit', N'EQUIPMENT.EDIT', NULL),
('00000000-0000-0000-0000-000000000032', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Delete', N'EQUIPMENT.DELETE', NULL),
('00000000-0000-0000-0000-000000000033', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Export', N'EQUIPMENT.EXPORT', NULL),
('00000000-0000-0000-0000-000000000034', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Approve', N'EQUIPMENT.APPROVE', NULL),
('00000000-0000-0000-0000-000000000035', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign equipments', CAST(0 AS bit), NULL, N'system', N'Equipment', N'Equipment.Assign', N'EQUIPMENT.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000036', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.View', N'MATERIAL.VIEW', NULL),
('00000000-0000-0000-0000-000000000037', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Create', N'MATERIAL.CREATE', NULL),
('00000000-0000-0000-0000-000000000038', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Edit', N'MATERIAL.EDIT', NULL),
('00000000-0000-0000-0000-000000000039', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Delete', N'MATERIAL.DELETE', NULL),
('00000000-0000-0000-0000-000000000040', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Export', N'MATERIAL.EXPORT', NULL),
('00000000-0000-0000-0000-000000000041', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Approve', N'MATERIAL.APPROVE', NULL),
('00000000-0000-0000-0000-000000000042', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign materials', CAST(0 AS bit), NULL, N'system', N'Material', N'Material.Assign', N'MATERIAL.ASSIGN', NULL);
INSERT INTO [Auth].[Permissions] ([Id], [Action], [CreatedAt], [CreatedBy], [Description], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [Module], [Name], [NormalizedName], [RoleId])
VALUES ('00000000-0000-0000-0000-000000000043', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.View', N'CLIENT.VIEW', NULL),
('00000000-0000-0000-0000-000000000044', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Create', N'CLIENT.CREATE', NULL),
('00000000-0000-0000-0000-000000000045', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Edit', N'CLIENT.EDIT', NULL),
('00000000-0000-0000-0000-000000000046', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Delete', N'CLIENT.DELETE', NULL),
('00000000-0000-0000-0000-000000000047', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Export', N'CLIENT.EXPORT', NULL),
('00000000-0000-0000-0000-000000000048', N'Approve', '0001-01-01T00:00:00.0000000', N'system', N'Permission to approve clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Approve', N'CLIENT.APPROVE', NULL),
('00000000-0000-0000-0000-000000000049', N'Assign', '0001-01-01T00:00:00.0000000', N'system', N'Permission to assign clients', CAST(0 AS bit), NULL, N'system', N'Client', N'Client.Assign', N'CLIENT.ASSIGN', NULL),
('00000000-0000-0000-0000-000000000050', N'View', '0001-01-01T00:00:00.0000000', N'system', N'Permission to view reports', CAST(0 AS bit), NULL, N'system', N'Report', N'Report.View', N'REPORT.VIEW', NULL),
('00000000-0000-0000-0000-000000000051', N'Create', '0001-01-01T00:00:00.0000000', N'system', N'Permission to create reports', CAST(0 AS bit), NULL, N'system', N'Report', N'Report.Create', N'REPORT.CREATE', NULL),
('00000000-0000-0000-0000-000000000052', N'Edit', '0001-01-01T00:00:00.0000000', N'system', N'Permission to edit reports', CAST(0 AS bit), NULL, N'system', N'Report', N'Report.Edit', N'REPORT.EDIT', NULL),
('00000000-0000-0000-0000-000000000053', N'Delete', '0001-01-01T00:00:00.0000000', N'system', N'Permission to delete reports', CAST(0 AS bit), NULL, N'system', N'Report', N'Report.Delete', N'REPORT.DELETE', NULL),
('00000000-0000-0000-0000-000000000054', N'Export', '0001-01-01T00:00:00.0000000', N'system', N'Permission to export reports', CAST(0 AS bit), NULL, N'system', N'Report', N'Report.Export', N'REPORT.EXPORT', NULL),
('00000000-0000-0000-0000-000000000055', N'FullAccess', '0001-01-01T00:00:00.0000000', N'system', N'Full access to all system features', CAST(0 AS bit), NULL, N'system', N'Admin', N'Admin.FullAccess', N'ADMIN.FULLACCESS', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Action', N'CreatedAt', N'CreatedBy', N'Description', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Module', N'Name', N'NormalizedName', N'RoleId') AND [object_id] = OBJECT_ID(N'[Auth].[Permissions]'))
    SET IDENTITY_INSERT [Auth].[Permissions] OFF;
2025-07-20 17:46:38.331 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'ColorCode', N'CreatedAt', N'CreatedBy', N'Description', N'DisplayOrder', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Metadata', N'Name', N'RequiresImmediateNotification', N'SeverityValue', N'TargetResponseHours') AND [object_id] = OBJECT_ID(N'[PriorityLevel]'))
    SET IDENTITY_INSERT [PriorityLevel] ON;
INSERT INTO [PriorityLevel] ([Id], [Code], [ColorCode], [CreatedAt], [CreatedBy], [Description], [DisplayOrder], [IsActive], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [Metadata], [Name], [RequiresImmediateNotification], [SeverityValue], [TargetResponseHours])
VALUES ('33333333-3333-3333-3333-333333333333', N'NORMAL', N'#2196F3', '2024-07-20T12:00:00.0000000Z', N'seed', N'Normal priority.', 0, CAST(1 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'seed', N'', N'Normal', CAST(0 AS bit), 2, 48),
('44444444-4444-4444-4444-444444444444', N'HIGH', N'#F44336', '2024-07-20T12:00:00.0000000Z', N'seed', N'High priority.', 0, CAST(1 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'seed', N'', N'High', CAST(1 AS bit), 4, 8);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Code', N'ColorCode', N'CreatedAt', N'CreatedBy', N'Description', N'DisplayOrder', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Metadata', N'Name', N'RequiresImmediateNotification', N'SeverityValue', N'TargetResponseHours') AND [object_id] = OBJECT_ID(N'[PriorityLevel]'))
    SET IDENTITY_INSERT [PriorityLevel] OFF;
2025-07-20 17:46:38.350 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedBy', N'Description', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[Auth].[Roles]'))
    SET IDENTITY_INSERT [Auth].[Roles] ON;
INSERT INTO [Auth].[Roles] ([Id], [CreatedAt], [CreatedBy], [Description], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [Name], [NormalizedName])
VALUES ('1f43eb74-9db6-4128-a3e5-69bd3aff3d67', '0001-01-01T00:00:00.0000000', N'system', N'Administrator role with full access', CAST(0 AS bit), NULL, N'system', N'Admin', N'ADMIN'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c12', '0001-01-01T00:00:00.0000000', N'system', N'Engineer role with technical permissions', CAST(0 AS bit), NULL, N'system', N'Engineer', N'ENGINEER'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c', '0001-01-01T00:00:00.0000000', N'system', N'Foreman role with supervision permissions', CAST(0 AS bit), NULL, N'system', N'Foreman', N'FOREMAN'),
('4f511c53-efa7-4f35-a86c-ba3079493f3c', '0001-01-01T00:00:00.0000000', N'system', N'Worker role with basic permissions', CAST(0 AS bit), NULL, N'system', N'Worker', N'WORKER'),
('5c77913c-eb6d-4a9f-9b3f-4b17c6d38a2d', '0001-01-01T00:00:00.0000000', N'system', N'Client role with limited permissions', CAST(0 AS bit), NULL, N'system', N'Client', N'CLIENT'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598252', '0001-01-01T00:00:00.0000000', N'system', N'Coordinator role with management permissions', CAST(0 AS bit), NULL, N'system', N'Coordinator', N'COORDINATOR');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedBy', N'Description', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Name', N'NormalizedName') AND [object_id] = OBJECT_ID(N'[Auth].[Roles]'))
    SET IDENTITY_INSERT [Auth].[Roles] OFF;
2025-07-20 17:46:38.369 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Avatar', N'CreatedAt', N'CreatedBy', N'Email', N'EmployeeId', N'FullName', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'PasswordHash', N'UserName') AND [object_id] = OBJECT_ID(N'[Auth].[Users]'))
    SET IDENTITY_INSERT [Auth].[Users] ON;
INSERT INTO [Auth].[Users] ([Id], [Avatar], [CreatedAt], [CreatedBy], [Email], [EmployeeId], [FullName], [IsActive], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [PasswordHash], [UserName])
VALUES ('7eb08e14-4e4c-4801-93e5-5d821bba7fd2', NULL, '2024-07-20T12:00:00.0000000Z', N'system', N'admin@unifiedcontract.com', NULL, N'System Administrator', CAST(1 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'system', N'AQAAAAIAAYagAAAAELbXp1J2NwQxX8K8QxX8K8QxX8K8QxX8K8QxX8K8QxX8K8QxX8QxX8K8Q==', N'admin'),
('cccccccc-cccc-cccc-cccc-cccccccccccc', NULL, '2024-07-20T12:00:00.0000000Z', N'seed', N'testuser@example.com', NULL, N'Test User', CAST(1 AS bit), CAST(0 AS bit), NULL, N'seed', N'849f1575ccfbf3a4d6cf00e6c5641b7fd4da2ed3e212c2d79ba9161a5a432ff0', N'testuser');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Avatar', N'CreatedAt', N'CreatedBy', N'Email', N'EmployeeId', N'FullName', N'IsActive', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'PasswordHash', N'UserName') AND [object_id] = OBJECT_ID(N'[Auth].[Users]'))
    SET IDENTITY_INSERT [Auth].[Users] OFF;
2025-07-20 17:46:38.389 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AllowsEditing', N'Code', N'ColorCode', N'CreatedAt', N'CreatedBy', N'Description', N'DisplayOrder', N'IsActive', N'IsCompleted', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Metadata', N'Name', N'RequiresApproval') AND [object_id] = OBJECT_ID(N'[WorkOrderStatus]'))
    SET IDENTITY_INSERT [WorkOrderStatus] ON;
INSERT INTO [WorkOrderStatus] ([Id], [AllowsEditing], [Code], [ColorCode], [CreatedAt], [CreatedBy], [Description], [DisplayOrder], [IsActive], [IsCompleted], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [Metadata], [Name], [RequiresApproval])
VALUES ('11111111-1111-1111-1111-111111111111', CAST(1 AS bit), N'PENDING', N'#FFA500', '2024-07-20T12:00:00.0000000Z', N'seed', N'Work order is pending.', 0, CAST(1 AS bit), CAST(0 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'seed', N'', N'Pending', CAST(0 AS bit)),
('22222222-2222-2222-2222-222222222222', CAST(0 AS bit), N'COMPLETED', N'#4CAF50', '2024-07-20T12:00:00.0000000Z', N'seed', N'Work order is completed.', 0, CAST(1 AS bit), CAST(1 AS bit), CAST(0 AS bit), '2024-07-20T12:00:00.0000000Z', N'seed', N'', N'Completed', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AllowsEditing', N'Code', N'ColorCode', N'CreatedAt', N'CreatedBy', N'Description', N'DisplayOrder', N'IsActive', N'IsCompleted', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'Metadata', N'Name', N'RequiresApproval') AND [object_id] = OBJECT_ID(N'[WorkOrderStatus]'))
    SET IDENTITY_INSERT [WorkOrderStatus] OFF;
2025-07-20 17:46:38.432 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedBy', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'PermissionId', N'RoleId') AND [object_id] = OBJECT_ID(N'[RolePermission]'))
    SET IDENTITY_INSERT [RolePermission] ON;
INSERT INTO [RolePermission] ([Id], [CreatedAt], [CreatedBy], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [PermissionId], [RoleId])
VALUES ('11111111-1111-1111-1111-000000000053', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000053', '1f43eb74-9db6-4128-a3e5-69bd3aff3d67'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c11', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000003', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c13', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000001', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c14', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000006', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c17', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000005', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c24', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000036', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c25', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000037', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c27', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000035', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c2a', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000038', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c30', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000022', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c3b', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000029', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c42', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000050', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c46', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000054', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c50', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000042', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('2a5db2e7-9170-4a5d-9065-c2b1f20d2c51', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000043', '2a5db2e7-9170-4a5d-9065-c2b1f20d2c12'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289732e', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000042', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e72897345', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000029', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e72897359', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000035', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289735a', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000036', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289735b', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000037', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289736d', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000001', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('3c3d5e29-43b9-4f0e-8d5a-6d5e7289736f', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000003', '3c3d5e29-43b9-4f0e-8d5a-6d5e7289736c'),
('4f511c53-efa7-4f35-a86c-ba3079493f0a', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000036', '4f511c53-efa7-4f35-a86c-ba3079493f3c'),
('4f511c53-efa7-4f35-a86c-ba3079493f3d', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000001', '4f511c53-efa7-4f35-a86c-ba3079493f3c'),
('5c77913c-eb6d-4a9f-9b3f-4b17c6d38a2c', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000001', '5c77913c-eb6d-4a9f-9b3f-4b17c6d38a2d'),
('5c77913c-eb6d-4a9f-9b3f-4b17c6d38a7d', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000050', '5c77913c-eb6d-4a9f-9b3f-4b17c6d38a2d'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598202', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000050', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598203', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000051', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598206', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000054', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598210', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000042', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598211', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000043', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598216', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000044', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598217', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000045', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598250', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000002', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598251', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000003', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598253', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000001', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598255', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000007', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598257', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000005', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598262', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000030', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598263', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000031', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598264', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000036', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598265', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000037', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252');
INSERT INTO [RolePermission] ([Id], [CreatedAt], [CreatedBy], [IsDeleted], [LastModifiedAt], [LastModifiedBy], [PermissionId], [RoleId])
VALUES ('6d4c2c7c-cf19-4a33-8c5d-e9b68a598267', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000035', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a59826a', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000038', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a598270', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000022', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a59827a', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000028', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252'),
('6d4c2c7c-cf19-4a33-8c5d-e9b68a59827b', '0001-01-01T00:00:00.0000000', N'system', CAST(0 AS bit), NULL, N'system', '00000000-0000-0000-0000-000000000029', '6d4c2c7c-cf19-4a33-8c5d-e9b68a598252');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'CreatedAt', N'CreatedBy', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy', N'PermissionId', N'RoleId') AND [object_id] = OBJECT_ID(N'[RolePermission]'))
    SET IDENTITY_INSERT [RolePermission] OFF;
2025-07-20 17:46:38.452 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId', N'CreatedAt', N'CreatedBy', N'Id', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy') AND [object_id] = OBJECT_ID(N'[Auth].[UserRoles]'))
    SET IDENTITY_INSERT [Auth].[UserRoles] ON;
INSERT INTO [Auth].[UserRoles] ([RoleId], [UserId], [CreatedAt], [CreatedBy], [Id], [IsDeleted], [LastModifiedAt], [LastModifiedBy])
VALUES ('1f43eb74-9db6-4128-a3e5-69bd3aff3d67', '7eb08e14-4e4c-4801-93e5-5d821bba7fd2', '0001-01-01T00:00:00.0000000', N'system', 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', CAST(0 AS bit), NULL, N'system');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'RoleId', N'UserId', N'CreatedAt', N'CreatedBy', N'Id', N'IsDeleted', N'LastModifiedAt', N'LastModifiedBy') AND [object_id] = OBJECT_ID(N'[Auth].[UserRoles]'))
    SET IDENTITY_INSERT [Auth].[UserRoles] OFF;
2025-07-20 17:46:38.482 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Category', N'Class', N'ClientId', N'CompletionPercentage', N'CreatedAt', N'CreatedBy', N'Description', N'DueDate', N'EngineerInChargeId', N'EstimatedCost', N'InternalOrderNumber', N'IsDeleted', N'LaborExpense', N'LastModifiedAt', N'LastModifiedBy', N'Location', N'MaterialsExpense', N'OtherExpense', N'PriorityLevelId', N'ReceivedDate', N'StartDate', N'TargetEndDate', N'Title', N'Type', N'WorkOrderNumber', N'WorkOrderStatusId') AND [object_id] = OBJECT_ID(N'[WorkOrders]'))
    SET IDENTITY_INSERT [WorkOrders] ON;
INSERT INTO [WorkOrders] ([Id], [Category], [Class], [ClientId], [CompletionPercentage], [CreatedAt], [CreatedBy], [Description], [DueDate], [EngineerInChargeId], [EstimatedCost], [InternalOrderNumber], [IsDeleted], [LaborExpense], [LastModifiedAt], [LastModifiedBy], [Location], [MaterialsExpense], [OtherExpense], [PriorityLevelId], [ReceivedDate], [StartDate], [TargetEndDate], [Title], [Type], [WorkOrderNumber], [WorkOrderStatusId])
VALUES ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', N'Electrical', N'A', 'cccccccc-cccc-cccc-cccc-cccccccccccc', 0.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'Demo work order for testing.', '2024-07-25T17:00:00.0000000Z', NULL, 1000.0, N'INT-1001', CAST(0 AS bit), 300.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'Riyadh', 200.0, 50.0, '33333333-3333-3333-3333-333333333333', '2024-07-15T12:00:00.0000000Z', '2024-07-16T08:00:00.0000000Z', '2024-07-27T17:00:00.0000000Z', N'Demo Work Order 1', N'Project', N'WO-1001', '11111111-1111-1111-1111-111111111111'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', N'Mechanical', N'B', 'cccccccc-cccc-cccc-cccc-cccccccccccc', 100.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'Second demo work order.', '2024-07-18T17:00:00.0000000Z', NULL, 2500.0, N'INT-1002', CAST(0 AS bit), 800.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'Jeddah', 500.0, 100.0, '44444444-4444-4444-4444-444444444444', '2024-07-10T12:00:00.0000000Z', '2024-07-11T08:00:00.0000000Z', '2024-07-19T17:00:00.0000000Z', N'Demo Work Order 2', N'Maintenance', N'WO-1002', '22222222-2222-2222-2222-222222222222');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Category', N'Class', N'ClientId', N'CompletionPercentage', N'CreatedAt', N'CreatedBy', N'Description', N'DueDate', N'EngineerInChargeId', N'EstimatedCost', N'InternalOrderNumber', N'IsDeleted', N'LaborExpense', N'LastModifiedAt', N'LastModifiedBy', N'Location', N'MaterialsExpense', N'OtherExpense', N'PriorityLevelId', N'ReceivedDate', N'StartDate', N'TargetEndDate', N'Title', N'Type', N'WorkOrderNumber', N'WorkOrderStatusId') AND [object_id] = OBJECT_ID(N'[WorkOrders]'))
    SET IDENTITY_INSERT [WorkOrders] OFF;
2025-07-20 17:46:38.506 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ActualPrice', N'ActualPriceWithVAT', N'ActualQuantity', N'CreatedAt', N'CreatedBy', N'Currency', N'Description', N'EstimatedPrice', N'EstimatedPriceWithVAT', N'EstimatedQuantity', N'IsDeleted', N'ItemNumber', N'LastModifiedAt', N'LastModifiedBy', N'ManagementArea', N'PaymentType', N'ReasonForFinalQuantity', N'Unit', N'UnitPrice', N'WorkOrderId') AND [object_id] = OBJECT_ID(N'[WorkOrderItems]'))
    SET IDENTITY_INSERT [WorkOrderItems] ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES ('10000000-0000-0000-0000-000000000001', 1000.0, 1150.0, 10.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'SAR', N'Concrete Mix - Grade 30 for foundation work', 1000.0, 1150.0, 10.0, CAST(0 AS bit), N'WOI-1001-001', '2024-07-20T12:00:00.0000000Z', N'seed', N'Default Area', N'Fixed Price', N'Used as planned', N'm³', 100.0, 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'),
('10000000-0000-0000-0000-000000000002', 600.0, 690.0, 5.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'SAR', N'Steel Bars - 12mm for structural support', 600.0, 690.0, 5.0, CAST(0 AS bit), N'WOI-1001-002', '2024-07-20T12:00:00.0000000Z', N'seed', N'Default Area', N'Fixed Price', N'Used as planned', N'ton', 120.0, 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'),
('10000000-0000-0000-0000-000000000003', 2500.0, 2875.0, 2.0, '2024-07-20T12:00:00.0000000Z', N'seed', N'SAR', N'Electrical Wiring - 2.5mm² for power distribution', 2500.0, 2875.0, 2.0, CAST(0 AS bit), N'WOI-1002-001', '2024-07-20T12:00:00.0000000Z', N'seed', N'Default Area', N'Fixed Price', N'Used as planned', N'm', 1250.0, 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ActualPrice', N'ActualPriceWithVAT', N'ActualQuantity', N'CreatedAt', N'CreatedBy', N'Currency', N'Description', N'EstimatedPrice', N'EstimatedPriceWithVAT', N'EstimatedQuantity', N'IsDeleted', N'ItemNumber', N'LastModifiedAt', N'LastModifiedBy', N'ManagementArea', N'PaymentType', N'ReasonForFinalQuantity', N'Unit', N'UnitPrice', N'WorkOrderId') AND [object_id] = OBJECT_ID(N'[WorkOrderItems]'))
    SET IDENTITY_INSERT [WorkOrderItems] OFF;
2025-07-20 17:46:38.509 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActionNeeded_AssignedToId] ON [ActionNeeded] ([AssignedToId]);
2025-07-20 17:46:38.511 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActionNeeded_CompletedById] ON [ActionNeeded] ([CompletedById]);
2025-07-20 17:46:38.513 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActionNeeded_PriorityLevelId] ON [ActionNeeded] ([PriorityLevelId]);
2025-07-20 17:46:38.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActionNeeded_WorkOrderId] ON [ActionNeeded] ([WorkOrderId]);
2025-07-20 17:46:38.516 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActionNeeded_WorkOrderId1] ON [ActionNeeded] ([WorkOrderId1]);
2025-07-20 17:46:38.518 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityLogs_CreatedAt] ON [Common].[ActivityLogs] ([CreatedAt]);
2025-07-20 17:46:38.520 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityLogs_EntityId] ON [Common].[ActivityLogs] ([EntityId]);
2025-07-20 17:46:38.521 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityLogs_EntityType] ON [Common].[ActivityLogs] ([EntityType]);
2025-07-20 17:46:38.523 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityLogs_EntityType_EntityId] ON [Common].[ActivityLogs] ([EntityType], [EntityId]);
2025-07-20 17:46:38.525 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ActivityLogs_UserId] ON [Common].[ActivityLogs] ([UserId]);
2025-07-20 17:46:38.526 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Allowances_EffectiveDate] ON [HR].[Allowances] ([EffectiveDate]);
2025-07-20 17:46:38.528 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Allowances_EndDate] ON [HR].[Allowances] ([EndDate]);
2025-07-20 17:46:38.529 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Allowances_IsTaxable] ON [HR].[Allowances] ([IsTaxable]);
2025-07-20 17:46:38.531 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Allowances_SalaryId] ON [HR].[Allowances] ([SalaryId]);
2025-07-20 17:46:38.532 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Allowances_Type] ON [HR].[Allowances] ([Type]);
2025-07-20 17:46:38.534 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachments_FileType] ON [Common].[Attachments] ([FileType]);
2025-07-20 17:46:38.535 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachments_UploadDate] ON [Common].[Attachments] ([UploadDate]);
2025-07-20 17:46:38.537 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachments_UploadDate_UploadedById] ON [Common].[Attachments] ([UploadDate], [UploadedById]);
2025-07-20 17:46:38.538 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attachments_UploadedById] ON [Common].[Attachments] ([UploadedById]);
2025-07-20 17:46:38.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_Date] ON [HR].[Attendances] ([Date]);
2025-07-20 17:46:38.541 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_Date_IsAbsent] ON [HR].[Attendances] ([Date], [IsAbsent]);
2025-07-20 17:46:38.542 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_EmployeeId] ON [HR].[Attendances] ([EmployeeId]);
2025-07-20 17:46:38.546 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Attendances_EmployeeId_Date] ON [HR].[Attendances] ([EmployeeId], [Date]);
2025-07-20 17:46:38.547 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_IsAbsent] ON [HR].[Attendances] ([IsAbsent]);
2025-07-20 17:46:38.549 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_IsHalfDay] ON [HR].[Attendances] ([IsHalfDay]);
2025-07-20 17:46:38.551 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_IsOnLeave] ON [HR].[Attendances] ([IsOnLeave]);
2025-07-20 17:46:38.553 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Attendances_LeaveId] ON [HR].[Attendances] ([LeaveId]);
2025-07-20 17:46:38.555 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_AccountNumber] ON [HR].[BankAccounts] ([AccountNumber]);
2025-07-20 17:46:38.556 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_BankName] ON [HR].[BankAccounts] ([BankName]);
2025-07-20 17:46:38.558 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_EmployeeId] ON [HR].[BankAccounts] ([EmployeeId]);
2025-07-20 17:46:38.559 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_EmployeeId_IsPrimary] ON [HR].[BankAccounts] ([EmployeeId], [IsPrimary]);
2025-07-20 17:46:38.561 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_IBAN] ON [HR].[BankAccounts] ([IBAN]);
2025-07-20 17:46:38.563 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_BankAccounts_IsPrimary] ON [HR].[BankAccounts] ([IsPrimary]);
2025-07-20 17:46:38.565 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Certificates_EmployeeId] ON [HR].[Certificates] ([EmployeeId]);
2025-07-20 17:46:38.566 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Certificates_ExpiryDate] ON [HR].[Certificates] ([ExpiryDate]);
2025-07-20 17:46:38.568 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Certificates_IssueDate] ON [HR].[Certificates] ([IssueDate]);
2025-07-20 17:46:38.569 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Certificates_Issuer] ON [HR].[Certificates] ([Issuer]);
2025-07-20 17:46:38.571 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Certificates_Verified] ON [HR].[Certificates] ([Verified]);
2025-07-20 17:46:38.575 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_AccountManagerId] ON [Client].[Client] ([AccountManagerId]);
2025-07-20 17:46:38.579 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_CompanyName] ON [Client].[Client] ([CompanyName]);
2025-07-20 17:46:38.583 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_CompanyName_IsActive] ON [Client].[Client] ([CompanyName], [IsActive]);
2025-07-20 17:46:38.586 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_Email] ON [Client].[Client] ([Email]);
2025-07-20 17:46:38.589 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_IsActive] ON [Client].[Client] ([IsActive]);
2025-07-20 17:46:38.593 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_Name] ON [Client].[Client] ([Name]);
2025-07-20 17:46:38.597 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_Name_IsActive] ON [Client].[Client] ([Name], [IsActive]);
2025-07-20 17:46:38.600 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_Phone] ON [Client].[Client] ([Phone]);
2025-07-20 17:46:38.604 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Client_VatNumber] ON [Client].[Client] ([VatNumber]);
2025-07-20 17:46:38.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_ClientId] ON [Client].[ClientContact] ([ClientId]);
2025-07-20 17:46:38.608 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_ClientId_Email] ON [Client].[ClientContact] ([ClientId], [Email]);
2025-07-20 17:46:38.609 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_ClientId_IsPrimaryContact] ON [Client].[ClientContact] ([ClientId], [IsPrimaryContact]);
2025-07-20 17:46:38.611 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_Email] ON [Client].[ClientContact] ([Email]);
2025-07-20 17:46:38.613 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_IsPrimaryContact] ON [Client].[ClientContact] ([IsPrimaryContact]);
2025-07-20 17:46:38.614 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_Name] ON [Client].[ClientContact] ([Name]);
2025-07-20 17:46:38.615 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientContact_Phone] ON [Client].[ClientContact] ([Phone]);
2025-07-20 17:46:38.616 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientMaterials_ClientId] ON [Resource].[ClientMaterials] ([ClientId]);
2025-07-20 17:46:38.618 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ClientMaterials_ClientId_MaterialMasterCode] ON [Resource].[ClientMaterials] ([ClientId], [MaterialMasterCode]);
2025-07-20 17:46:38.620 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientMaterials_MaterialMasterCode] ON [Resource].[ClientMaterials] ([MaterialMasterCode]);
2025-07-20 17:46:38.622 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_IsDefault] ON [Analytics].[Dashboard] ([IsDefault]);
2025-07-20 17:46:38.623 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_IsPublic] ON [Analytics].[Dashboard] ([IsPublic]);
2025-07-20 17:46:38.625 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_IsSystem] ON [Analytics].[Dashboard] ([IsSystem]);
2025-07-20 17:46:38.627 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_Module] ON [Analytics].[Dashboard] ([Module]);
2025-07-20 17:46:38.628 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_Module_IsDefault] ON [Analytics].[Dashboard] ([Module], [IsDefault]);
2025-07-20 17:46:38.630 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_Name] ON [Analytics].[Dashboard] ([Name]);
2025-07-20 17:46:38.631 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_OwnerId] ON [Analytics].[Dashboard] ([OwnerId]);
2025-07-20 17:46:38.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Dashboard_OwnerId_IsPublic] ON [Analytics].[Dashboard] ([OwnerId], [IsPublic]);
2025-07-20 17:46:38.635 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardUser_CanEdit] ON [Analytics].[DashboardUser] ([CanEdit]);
2025-07-20 17:46:38.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardUser_DashboardId] ON [Analytics].[DashboardUser] ([DashboardId]);
2025-07-20 17:46:38.638 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DashboardUser_DashboardId_UserId] ON [Analytics].[DashboardUser] ([DashboardId], [UserId]);
2025-07-20 17:46:38.640 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardUser_UserId] ON [Analytics].[DashboardUser] ([UserId]);
2025-07-20 17:46:38.641 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_ChartType] ON [Analytics].[DashboardWidget] ([ChartType]);
2025-07-20 17:46:38.643 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_DashboardId] ON [Analytics].[DashboardWidget] ([DashboardId]);
2025-07-20 17:46:38.644 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_DashboardId_IsActive] ON [Analytics].[DashboardWidget] ([DashboardId], [IsActive]);
2025-07-20 17:46:38.645 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_DashboardId_Position] ON [Analytics].[DashboardWidget] ([DashboardId], [Position]);
2025-07-20 17:46:38.647 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_IsActive] ON [Analytics].[DashboardWidget] ([IsActive]);
2025-07-20 17:46:38.648 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_Position] ON [Analytics].[DashboardWidget] ([Position]);
2025-07-20 17:46:38.650 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_Title] ON [Analytics].[DashboardWidget] ([Title]);
2025-07-20 17:46:38.651 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DashboardWidget_Type] ON [Analytics].[DashboardWidget] ([Type]);
2025-07-20 17:46:38.652 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Deductions_EffectiveDate] ON [HR].[Deductions] ([EffectiveDate]);
2025-07-20 17:46:38.654 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Deductions_EndDate] ON [HR].[Deductions] ([EndDate]);
2025-07-20 17:46:38.655 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Deductions_IsMandatory] ON [HR].[Deductions] ([IsMandatory]);
2025-07-20 17:46:38.656 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Deductions_SalaryId] ON [HR].[Deductions] ([SalaryId]);
2025-07-20 17:46:38.658 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Deductions_Type] ON [HR].[Deductions] ([Type]);
2025-07-20 17:46:38.660 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Department_ManagerId] ON [Department] ([ManagerId]);
2025-07-20 17:46:38.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Department_ParentDepartmentId] ON [Department] ([ParentDepartmentId]);
2025-07-20 17:46:38.663 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_ContentType] ON [Document].[DocumentTemplate] ([ContentType]);
2025-07-20 17:46:38.664 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_CreatedById] ON [Document].[DocumentTemplate] ([CreatedById]);
2025-07-20 17:46:38.666 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_IsActive] ON [Document].[DocumentTemplate] ([IsActive]);
2025-07-20 17:46:38.667 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_LastModifiedById] ON [Document].[DocumentTemplate] ([LastModifiedById]);
2025-07-20 17:46:38.669 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_Name] ON [Document].[DocumentTemplate] ([Name]);
2025-07-20 17:46:38.670 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_Name_Version] ON [Document].[DocumentTemplate] ([Name], [Version]);
2025-07-20 17:46:38.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_Type] ON [Document].[DocumentTemplate] ([Type]);
2025-07-20 17:46:38.673 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DocumentTemplate_Type_IsActive] ON [Document].[DocumentTemplate] ([Type], [IsActive]);
2025-07-20 17:46:38.675 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_Degree] ON [HR].[Educations] ([Degree]);
2025-07-20 17:46:38.677 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_EmployeeId] ON [HR].[Educations] ([EmployeeId]);
2025-07-20 17:46:38.678 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_EmployeeId_IsVerified] ON [HR].[Educations] ([EmployeeId], [IsVerified]);
2025-07-20 17:46:38.680 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_FieldOfStudy] ON [HR].[Educations] ([FieldOfStudy]);
2025-07-20 17:46:38.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_Institution] ON [HR].[Educations] ([Institution]);
2025-07-20 17:46:38.683 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Educations_StartDate_EndDate] ON [HR].[Educations] ([StartDate], [EndDate]);
2025-07-20 17:46:38.685 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmergencyContacts_EmployeeId] ON [HR].[EmergencyContacts] ([EmployeeId]);
2025-07-20 17:46:38.687 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmergencyContacts_EmployeeId_IsPrimaryContact] ON [HR].[EmergencyContacts] ([EmployeeId], [IsPrimaryContact]);
2025-07-20 17:46:38.688 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_EmergencyContacts_EmployeeId_Name] ON [HR].[EmergencyContacts] ([EmployeeId], [Name]);
2025-07-20 17:46:38.690 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmergencyContacts_IsPrimaryContact] ON [HR].[EmergencyContacts] ([IsPrimaryContact]);
2025-07-20 17:46:38.691 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmergencyContacts_Name] ON [HR].[EmergencyContacts] ([Name]);
2025-07-20 17:46:38.692 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmergencyContacts_Relationship] ON [HR].[EmergencyContacts] ([Relationship]);
2025-07-20 17:46:38.693 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Employees_BadgeNumber] ON [HR].[Employees] ([BadgeNumber]);
2025-07-20 17:46:38.694 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_DepartmentId] ON [HR].[Employees] ([DepartmentId]);
2025-07-20 17:46:38.696 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_DirectManagerId] ON [HR].[Employees] ([DirectManagerId]);
2025-07-20 17:46:38.698 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_IqamaNumber] ON [HR].[Employees] ([IqamaNumber]);
2025-07-20 17:46:38.699 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_JobTitle] ON [HR].[Employees] ([JobTitle]);
2025-07-20 17:46:38.700 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_JoinDate] ON [HR].[Employees] ([JoinDate]);
2025-07-20 17:46:38.702 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_Name] ON [HR].[Employees] ([Name]);
2025-07-20 17:46:38.703 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_Nationality] ON [HR].[Employees] ([Nationality]);
2025-07-20 17:46:38.704 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Employees_WorkLocation] ON [HR].[Employees] ([WorkLocation]);
2025-07-20 17:46:38.706 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmployeeSkills_EmployeeId] ON [HR].[EmployeeSkills] ([EmployeeId]);
2025-07-20 17:46:38.707 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_EmployeeSkills_EmployeeId_SkillId] ON [HR].[EmployeeSkills] ([EmployeeId], [SkillId]);
2025-07-20 17:46:38.708 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmployeeSkills_IsFeatured] ON [HR].[EmployeeSkills] ([IsFeatured]);
2025-07-20 17:46:38.709 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmployeeSkills_LastUsedDate] ON [HR].[EmployeeSkills] ([LastUsedDate]);
2025-07-20 17:46:38.710 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmployeeSkills_ProficiencyLevel] ON [HR].[EmployeeSkills] ([ProficiencyLevel]);
2025-07-20 17:46:38.711 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmployeeSkills_SkillId] ON [HR].[EmployeeSkills] ([SkillId]);
2025-07-20 17:46:38.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Equipment_CurrentOperatorId] ON [Equipment] ([CurrentOperatorId]);
2025-07-20 17:46:38.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Equipment_EquipmentStatusId] ON [Equipment] ([EquipmentStatusId]);
2025-07-20 17:46:38.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Equipment_SupplierId] ON [Equipment] ([SupplierId]);
2025-07-20 17:46:38.717 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentAssignment_EndDate] ON [Resource].[EquipmentAssignment] ([EndDate]);
2025-07-20 17:46:38.718 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentAssignment_EquipmentId] ON [Resource].[EquipmentAssignment] ([EquipmentId]);
2025-07-20 17:46:38.719 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentAssignment_OperatorId] ON [Resource].[EquipmentAssignment] ([OperatorId]);
2025-07-20 17:46:38.720 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentAssignment_StartDate] ON [Resource].[EquipmentAssignment] ([StartDate]);
2025-07-20 17:46:38.721 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentAssignment_WorkOrderId] ON [Resource].[EquipmentAssignment] ([WorkOrderId]);
2025-07-20 17:46:38.722 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_CompletedDate] ON [Resource].[EquipmentMaintenance] ([CompletedDate]);
2025-07-20 17:46:38.723 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_EquipmentId] ON [Resource].[EquipmentMaintenance] ([EquipmentId]);
2025-07-20 17:46:38.724 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_EquipmentId_ScheduledDate] ON [Resource].[EquipmentMaintenance] ([EquipmentId], [ScheduledDate]);
2025-07-20 17:46:38.725 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_MaintenanceStatusId] ON [Resource].[EquipmentMaintenance] ([MaintenanceStatusId]);
2025-07-20 17:46:38.727 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_MaintenanceTypeId] ON [Resource].[EquipmentMaintenance] ([MaintenanceTypeId]);
2025-07-20 17:46:38.728 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_PerformedById] ON [Resource].[EquipmentMaintenance] ([PerformedById]);
2025-07-20 17:46:38.729 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EquipmentMaintenance_ScheduledDate] ON [Resource].[EquipmentMaintenance] ([ScheduledDate]);
2025-07-20 17:46:38.730 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_EmployeeId] ON [HR].[Identifications] ([EmployeeId]);
2025-07-20 17:46:38.732 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_ExpiryDate] ON [HR].[Identifications] ([ExpiryDate]);
2025-07-20 17:46:38.734 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_IssueDate] ON [HR].[Identifications] ([IssueDate]);
2025-07-20 17:46:38.735 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_IssuingCountry] ON [HR].[Identifications] ([IssuingCountry]);
2025-07-20 17:46:38.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_Number] ON [HR].[Identifications] ([Number]);
2025-07-20 17:46:38.737 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Identifications_Type] ON [HR].[Identifications] ([Type]);
2025-07-20 17:46:38.739 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Identifications_Type_Number] ON [HR].[Identifications] ([Type], [Number]);
2025-07-20 17:46:38.740 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_ApprovedById] ON [HR].[Leaves] ([ApprovedById]);
2025-07-20 17:46:38.741 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_EmployeeId] ON [HR].[Leaves] ([EmployeeId]);
2025-07-20 17:46:38.743 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_EmployeeId_Status] ON [HR].[Leaves] ([EmployeeId], [Status]);
2025-07-20 17:46:38.744 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_EndDate] ON [HR].[Leaves] ([EndDate]);
2025-07-20 17:46:38.745 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_StartDate] ON [HR].[Leaves] ([StartDate]);
2025-07-20 17:46:38.747 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_StartDate_EndDate] ON [HR].[Leaves] ([StartDate], [EndDate]);
2025-07-20 17:46:38.748 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_Status] ON [HR].[Leaves] ([Status]);
2025-07-20 17:46:38.749 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Leaves_Type] ON [HR].[Leaves] ([Type]);
2025-07-20 17:46:38.750 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_BadgeNumber] ON [Resource].[ManpowerAssignment] ([BadgeNumber]);
2025-07-20 17:46:38.752 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_EmployeeId] ON [Resource].[ManpowerAssignment] ([EmployeeId]);
2025-07-20 17:46:38.753 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_EmployeeId_StartDate] ON [Resource].[ManpowerAssignment] ([EmployeeId], [StartDate]);
2025-07-20 17:46:38.754 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_EndDate] ON [Resource].[ManpowerAssignment] ([EndDate]);
2025-07-20 17:46:38.756 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_Name] ON [Resource].[ManpowerAssignment] ([Name]);
2025-07-20 17:46:38.758 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_Role] ON [Resource].[ManpowerAssignment] ([Role]);
2025-07-20 17:46:38.759 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_StartDate] ON [Resource].[ManpowerAssignment] ([StartDate]);
2025-07-20 17:46:38.761 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_UserId] ON [Resource].[ManpowerAssignment] ([UserId]);
2025-07-20 17:46:38.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_WorkOrderId] ON [Resource].[ManpowerAssignment] ([WorkOrderId]);
2025-07-20 17:46:38.764 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ManpowerAssignment_WorkOrderId_StartDate] ON [Resource].[ManpowerAssignment] ([WorkOrderId], [StartDate]);
2025-07-20 17:46:38.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_AssignDate] ON [Resource].[MaterialAssignment] ([AssignDate]);
2025-07-20 17:46:38.768 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_AssignedById] ON [Resource].[MaterialAssignment] ([AssignedById]);
2025-07-20 17:46:38.770 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_MaterialType] ON [Resource].[MaterialAssignment] ([MaterialType]);
2025-07-20 17:46:38.771 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_MaterialType_AssignDate] ON [Resource].[MaterialAssignment] ([MaterialType], [AssignDate]);
2025-07-20 17:46:38.772 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_MaterialTypeId] ON [Resource].[MaterialAssignment] ([MaterialTypeId]);
2025-07-20 17:46:38.773 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_PurchasableMaterialId] ON [Resource].[MaterialAssignment] ([PurchasableMaterialId]);
2025-07-20 17:46:38.775 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_ReceivableMaterialId] ON [Resource].[MaterialAssignment] ([ReceivableMaterialId]);
2025-07-20 17:46:38.776 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_WorkOrderId] ON [Resource].[MaterialAssignment] ([WorkOrderId]);
2025-07-20 17:46:38.777 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_MaterialAssignment_WorkOrderId_AssignDate] ON [Resource].[MaterialAssignment] ([WorkOrderId], [AssignDate]);
2025-07-20 17:46:38.779 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_CreatedAt] ON [Common].[Notifications] ([CreatedAt]);
2025-07-20 17:46:38.780 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_EntityId_EntityType] ON [Common].[Notifications] ([EntityId], [EntityType]);
2025-07-20 17:46:38.781 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_IsRead] ON [Common].[Notifications] ([IsRead]);
2025-07-20 17:46:38.783 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Common].[Notifications] ([UserId]);
2025-07-20 17:46:38.784 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId_IsRead] ON [Common].[Notifications] ([UserId], [IsRead]);
2025-07-20 17:46:38.785 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceCriteria_Name] ON [HR].[PerformanceCriteria] ([Name]);
2025-07-20 17:46:38.786 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceCriteria_PerformanceReviewId] ON [HR].[PerformanceCriteria] ([PerformanceReviewId]);
2025-07-20 17:46:38.788 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceCriteria_Rating] ON [HR].[PerformanceCriteria] ([Rating]);
2025-07-20 17:46:38.789 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_CompletionDate] ON [HR].[PerformanceReviews] ([CompletionDate]);
2025-07-20 17:46:38.790 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_DueDate] ON [HR].[PerformanceReviews] ([DueDate]);
2025-07-20 17:46:38.791 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_EmployeeId] ON [HR].[PerformanceReviews] ([EmployeeId]);
2025-07-20 17:46:38.793 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_OverallRating] ON [HR].[PerformanceReviews] ([OverallRating]);
2025-07-20 17:46:38.794 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_ReviewerId] ON [HR].[PerformanceReviews] ([ReviewerId]);
2025-07-20 17:46:38.795 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_ReviewPeriodEnd] ON [HR].[PerformanceReviews] ([ReviewPeriodEnd]);
2025-07-20 17:46:38.797 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_ReviewPeriodStart] ON [HR].[PerformanceReviews] ([ReviewPeriodStart]);
2025-07-20 17:46:38.798 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PerformanceReviews_Status] ON [HR].[PerformanceReviews] ([Status]);
2025-07-20 17:46:38.803 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Permissions_Module_Action] ON [Auth].[Permissions] ([Module], [Action]);
2025-07-20 17:46:38.807 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Permissions_NormalizedName] ON [Auth].[Permissions] ([NormalizedName]);
2025-07-20 17:46:38.810 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Permissions_RoleId] ON [Auth].[Permissions] ([RoleId]);
2025-07-20 17:46:38.812 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Permits_WorkOrderId] ON [Permits] ([WorkOrderId]);
2025-07-20 17:46:38.814 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_DeliveryDate] ON [Resource].[PurchasableMaterial] ([DeliveryDate]);
2025-07-20 17:46:38.815 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_MaterialTypeId] ON [Resource].[PurchasableMaterial] ([MaterialTypeId]);
2025-07-20 17:46:38.818 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_Name] ON [Resource].[PurchasableMaterial] ([Name]);
2025-07-20 17:46:38.819 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_OrderDate] ON [Resource].[PurchasableMaterial] ([OrderDate]);
2025-07-20 17:46:38.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_Status] ON [Resource].[PurchasableMaterial] ([Status]);
2025-07-20 17:46:38.822 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_Status_MaterialTypeId] ON [Resource].[PurchasableMaterial] ([Status], [MaterialTypeId]);
2025-07-20 17:46:38.824 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_SupplierId] ON [Resource].[PurchasableMaterial] ([SupplierId]);
2025-07-20 17:46:38.826 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PurchasableMaterial_SupplierId_Status] ON [Resource].[PurchasableMaterial] ([SupplierId], [Status]);
2025-07-20 17:46:38.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_ClientMaterialId] ON [Resource].[ReceivableMaterials] ([ClientMaterialId]);
2025-07-20 17:46:38.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_MaterialTypeId] ON [Resource].[ReceivableMaterials] ([MaterialTypeId]);
2025-07-20 17:46:38.830 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_ReceivedById] ON [Resource].[ReceivableMaterials] ([ReceivedById]);
2025-07-20 17:46:38.831 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_ReturnedById] ON [Resource].[ReceivableMaterials] ([ReturnedById]);
2025-07-20 17:46:38.833 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_Status] ON [Resource].[ReceivableMaterials] ([Status]);
2025-07-20 17:46:38.834 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReceivableMaterials_WorkOrderId] ON [Resource].[ReceivableMaterials] ([WorkOrderId]);
2025-07-20 17:46:38.836 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_CreatedByUserId] ON [Analytics].[Report] ([CreatedByUserId]);
2025-07-20 17:46:38.837 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_CreatedByUserId_IsPublic] ON [Analytics].[Report] ([CreatedByUserId], [IsPublic]);
2025-07-20 17:46:38.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_IsPublic] ON [Analytics].[Report] ([IsPublic]);
2025-07-20 17:46:38.839 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_IsSystem] ON [Analytics].[Report] ([IsSystem]);
2025-07-20 17:46:38.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_Name] ON [Analytics].[Report] ([Name]);
2025-07-20 17:46:38.842 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_TemplateId] ON [Analytics].[Report] ([TemplateId]);
2025-07-20 17:46:38.843 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_Type] ON [Analytics].[Report] ([Type]);
2025-07-20 17:46:38.844 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Report_Type_IsPublic] ON [Analytics].[Report] ([Type], [IsPublic]);
2025-07-20 17:46:38.848 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermission_PermissionId] ON [RolePermission] ([PermissionId]);
2025-07-20 17:46:38.851 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermission_RoleId] ON [RolePermission] ([RoleId]);
2025-07-20 17:46:38.852 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EffectiveDate] ON [HR].[Salaries] ([EffectiveDate]);
2025-07-20 17:46:38.854 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EffectiveDate_EndDate] ON [HR].[Salaries] ([EffectiveDate], [EndDate]);
2025-07-20 17:46:38.855 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EmployeeId] ON [HR].[Salaries] ([EmployeeId]);
2025-07-20 17:46:38.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EmployeeId_EffectiveDate] ON [HR].[Salaries] ([EmployeeId], [EffectiveDate]);
2025-07-20 17:46:38.858 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EmployeeId_IsActive] ON [HR].[Salaries] ([EmployeeId], [IsActive]);
2025-07-20 17:46:38.859 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_EndDate] ON [HR].[Salaries] ([EndDate]);
2025-07-20 17:46:38.861 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Salaries_IsActive] ON [HR].[Salaries] ([IsActive]);
2025-07-20 17:46:38.862 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SiteReportMaterialsUsed_MaterialAssignmentId] ON [SiteReportMaterialsUsed] ([MaterialAssignmentId]);
2025-07-20 17:46:38.864 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SiteReportMaterialsUsed_SiteReportId] ON [SiteReportMaterialsUsed] ([SiteReportId]);
2025-07-20 17:46:38.864 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SiteReportPhotos_SiteReportId] ON [SiteReportPhotos] ([SiteReportId]);
2025-07-20 17:46:38.865 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SiteReports_WorkOrderId] ON [SiteReports] ([WorkOrderId]);
2025-07-20 17:46:38.866 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Skills_Category] ON [HR].[Skills] ([Category]);
2025-07-20 17:46:38.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Skills_Name] ON [HR].[Skills] ([Name]);
2025-07-20 17:46:38.869 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_CategoryId] ON [Resource].[Supplier] ([CategoryId]);
2025-07-20 17:46:38.871 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_Email] ON [Resource].[Supplier] ([Email]);
2025-07-20 17:46:38.872 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_Email_IsActive] ON [Resource].[Supplier] ([Email], [IsActive]);
2025-07-20 17:46:38.873 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_IsActive] ON [Resource].[Supplier] ([IsActive]);
2025-07-20 17:46:38.875 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_Name] ON [Resource].[Supplier] ([Name]);
2025-07-20 17:46:38.875 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_Name_IsActive] ON [Resource].[Supplier] ([Name], [IsActive]);
2025-07-20 17:46:38.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_Phone] ON [Resource].[Supplier] ([Phone]);
2025-07-20 17:46:38.878 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_SupplierCategoryId] ON [Resource].[Supplier] ([SupplierCategoryId]);
2025-07-20 17:46:38.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Supplier_VatNumber] ON [Resource].[Supplier] ([VatNumber]);
2025-07-20 17:46:38.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_EmployeeId] ON [HR].[Trainings] ([EmployeeId]);
2025-07-20 17:46:38.883 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_EmployeeId_Status] ON [HR].[Trainings] ([EmployeeId], [Status]);
2025-07-20 17:46:38.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_EndDate] ON [HR].[Trainings] ([EndDate]);
2025-07-20 17:46:38.886 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_Provider] ON [HR].[Trainings] ([Provider]);
2025-07-20 17:46:38.887 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_Score] ON [HR].[Trainings] ([Score]);
2025-07-20 17:46:38.888 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_StartDate] ON [HR].[Trainings] ([StartDate]);
2025-07-20 17:46:38.889 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_StartDate_EndDate] ON [HR].[Trainings] ([StartDate], [EndDate]);
2025-07-20 17:46:38.891 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_Status] ON [HR].[Trainings] ([Status]);
2025-07-20 17:46:38.892 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Trainings_Title] ON [HR].[Trainings] ([Title]);
2025-07-20 17:46:38.896 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [Auth].[UserRoles] ([RoleId]);
2025-07-20 17:46:38.899 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_UserId_RoleId] ON [Auth].[UserRoles] ([UserId], [RoleId]);
2025-07-20 17:46:38.902 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_Email] ON [Auth].[Users] ([Email]);
2025-07-20 17:46:38.905 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_EmployeeId] ON [Auth].[Users] ([EmployeeId]);
2025-07-20 17:46:38.907 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Users_IsEmployee] ON [Auth].[Users] ([IsEmployee]);
2025-07-20 17:46:38.911 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Users_UserName] ON [Auth].[Users] ([UserName]);
2025-07-20 17:46:38.913 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_CompanyName] ON [HR].[WorkExperiences] ([CompanyName]);
2025-07-20 17:46:38.914 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_EmployeeId] ON [HR].[WorkExperiences] ([EmployeeId]);
2025-07-20 17:46:38.916 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_EmployeeId_IsCurrentEmployer] ON [HR].[WorkExperiences] ([EmployeeId], [IsCurrentEmployer]);
2025-07-20 17:46:38.917 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_IsCurrentEmployer] ON [HR].[WorkExperiences] ([IsCurrentEmployer]);
2025-07-20 17:46:38.919 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_Position] ON [HR].[WorkExperiences] ([Position]);
2025-07-20 17:46:38.920 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkExperiences_StartDate_EndDate] ON [HR].[WorkExperiences] ([StartDate], [EndDate]);
2025-07-20 17:46:38.921 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderActions_PriorityLevelId] ON [WorkOrderActions] ([PriorityLevelId]);
2025-07-20 17:46:38.922 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderActions_WorkOrderId] ON [WorkOrderActions] ([WorkOrderId]);
2025-07-20 17:46:38.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderExpenses_WorkOrderId] ON [WorkOrderExpenses] ([WorkOrderId]);
2025-07-20 17:46:38.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderForms_WorkOrderId] ON [WorkOrderForms] ([WorkOrderId]);
2025-07-20 17:46:38.927 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderInvoices_WorkOrderId] ON [WorkOrderInvoices] ([WorkOrderId]);
2025-07-20 17:46:38.929 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderIssues_PriorityLevelId] ON [WorkOrderIssues] ([PriorityLevelId]);
2025-07-20 17:46:38.930 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderIssues_WorkOrderId] ON [WorkOrderIssues] ([WorkOrderId]);
2025-07-20 17:46:38.934 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderItems_WorkOrderId] ON [WorkOrderItems] ([WorkOrderId]);
2025-07-20 17:46:38.935 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderPhotos_WorkOrderId] ON [WorkOrderPhotos] ([WorkOrderId]);
2025-07-20 17:46:38.937 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderRemarks_WorkOrderId] ON [WorkOrderRemarks] ([WorkOrderId]);
2025-07-20 17:46:38.940 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrders_ClientId] ON [WorkOrders] ([ClientId]);
2025-07-20 17:46:38.943 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrders_EngineerInChargeId] ON [WorkOrders] ([EngineerInChargeId]);
2025-07-20 17:46:38.947 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrders_PriorityLevelId] ON [WorkOrders] ([PriorityLevelId]);
2025-07-20 17:46:38.952 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrders_WorkOrderStatusId] ON [WorkOrders] ([WorkOrderStatusId]);
2025-07-20 17:46:38.953 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderTasks_PriorityLevelId] ON [WorkOrderTasks] ([PriorityLevelId]);
2025-07-20 17:46:38.955 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_WorkOrderTasks_WorkOrderId] ON [WorkOrderTasks] ([WorkOrderId]);
2025-07-20 17:46:38.959 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[Allowances] ADD CONSTRAINT [FK_Allowances_Salaries_SalaryId] FOREIGN KEY ([SalaryId]) REFERENCES [HR].[Salaries] ([Id]) ON DELETE NO ACTION;
2025-07-20 17:46:38.962 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[Attendances] ADD CONSTRAINT [FK_Attendances_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE;
2025-07-20 17:46:38.964 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[Attendances] ADD CONSTRAINT [FK_Attendances_Leaves_LeaveId] FOREIGN KEY ([LeaveId]) REFERENCES [HR].[Leaves] ([Id]) ON DELETE SET NULL;
2025-07-20 17:46:38.966 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[BankAccounts] ADD CONSTRAINT [FK_BankAccounts_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE;
2025-07-20 17:46:38.968 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[Certificates] ADD CONSTRAINT [FK_Certificates_Employees_EmployeeId] FOREIGN KEY ([EmployeeId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE CASCADE;
2025-07-20 17:46:38.970 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [HR].[Deductions] ADD CONSTRAINT [FK_Deductions_Salaries_SalaryId] FOREIGN KEY ([SalaryId]) REFERENCES [HR].[Salaries] ([Id]) ON DELETE NO ACTION;
2025-07-20 17:46:38.973 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Department] ADD CONSTRAINT [FK_Department_Employees_ManagerId] FOREIGN KEY ([ManagerId]) REFERENCES [HR].[Employees] ([Id]) ON DELETE SET NULL;
2025-07-20 17:46:38.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250720144259_AddPaymentTypeManagementAreaCurrencyToWorkOrderItem', N'9.0.7');
2025-07-20 17:46:38.986 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:46:38.989 +03:00 [INF] Starting web host
2025-07-20 17:46:38.998 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:46:39.040 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:46:39.042 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:46:39.043 +03:00 [INF] Hosting environment: Development
2025-07-20 17:46:39.043 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:46:44.523 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:46:44.565 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:46:44.574 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:46:44.575 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:46:44.577 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:46:44.580 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:46:44.581 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:46:44.581 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:46:44.582 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:46:44.587 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 12.8635ms
2025-07-20 17:46:44.588 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 65.8982ms
2025-07-20 17:46:44.591 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:46:44.591 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:46:44.596 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:46:44.596 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:46:44.598 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:46:44.598 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:46:44.700 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:46:44.700 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:46:44.712 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:46:44.712 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:46:44.717 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:46:44.727 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 9.7248ms
2025-07-20 17:46:44.728 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:46:44.729 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:46:44.744 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 153.2842ms
2025-07-20 17:46:44.986 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:46:45.054 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:46:45.149 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 435.9212ms
2025-07-20 17:46:45.150 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:46:45.152 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:46:45.158 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 567.4215ms
2025-07-20 17:47:00.166 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:47:00.167 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:47:00.168 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:47:00.168 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:47:00.169 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.6563ms
2025-07-20 17:47:00.171 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 142
2025-07-20 17:47:00.175 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"324","description":"fsdf fsd ","unit":"ds","unitPrice":4,"paymentType":"fsdfsdf","managementArea":"fdsfdsqa","currency":"dsdf"}
2025-07-20 17:47:00.175 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:47:00.183 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:47:00.195 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:47:00.386 +03:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 50), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:47:00.397 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-20 17:47:00.405 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 209.3036ms
2025-07-20 17:47:00.407 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:47:00.408 +03:00 [ERR] An unhandled exception occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 277
   at lambda_method512(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
2025-07-20 17:47:00.423 +03:00 [INF] HTTP POST /api/work-order-items - Response: 500: {"Status":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Data":"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\u00601 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277\r\n   at lambda_method512(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:47:00.428 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 256.9784ms
2025-07-20 17:48:57.573 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:48:57.573 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:48:57.573 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:48:57.574 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:48:57.574 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 1.5418ms
2025-07-20 17:48:57.576 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:48:57.577 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:48:57.578 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:48:57.580 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:48:57.581 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:48:57.581 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:48:57.581 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 0.4691ms
2025-07-20 17:48:57.582 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:48:57.582 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:48:57.582 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 6.0027ms
2025-07-20 17:48:57.672 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:48:57.673 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:48:57.673 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:48:57.673 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:48:57.674 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 1.9164ms
2025-07-20 17:48:57.678 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:48:57.680 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:48:57.682 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:48:57.683 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:48:57.683 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:48:57.695 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:48:57.698 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:48:57.699 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 15.6003ms
2025-07-20 17:48:57.700 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:48:57.700 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:48:57.702 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 24.1471ms
2025-07-20 17:49:12.412 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:49:12.412 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:49:12.413 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:12.413 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:49:12.413 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 1.7086ms
2025-07-20 17:49:12.415 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 164
2025-07-20 17:49:12.416 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"3333333333","description":"dsadsadas","unit":"dsadsadas","unitPrice":4,"paymentType":"dsadsadas","managementArea":"dsadsadas","currency":"dsadsadas"}
2025-07-20 17:49:12.416 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:12.417 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:49:12.418 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:49:12.430 +03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 50), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:49:12.434 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-20 17:49:12.442 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 24.0207ms
2025-07-20 17:49:12.442 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:49:12.443 +03:00 [ERR] An unhandled exception occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:69cad314-d9e2-464c-a6fe-7031a90b3833
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 277
   at lambda_method512(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
2025-07-20 17:49:12.450 +03:00 [INF] HTTP POST /api/work-order-items - Response: 500: {"Status":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Data":"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\u00601 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277\r\n   at lambda_method512(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:49:12.454 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 38.7275ms
2025-07-20 17:49:22.500 +03:00 [INF] Application is shutting down...
2025-07-20 17:49:30.643 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:49:30.718 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:49:30.719 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:49:30.720 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:49:31.302 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:49:31.309 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:49:31.321 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:49:31.362 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:49:31.369 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:49:31.371 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:49:31.374 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:49:31.379 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-07-20 17:49:31.381 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:49:31.384 +03:00 [INF] Starting web host
2025-07-20 17:49:31.394 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:49:31.439 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:49:31.441 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:49:31.442 +03:00 [INF] Hosting environment: Development
2025-07-20 17:49:31.442 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:49:36.582 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:49:36.602 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:49:36.634 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:49:36.641 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:49:36.641 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:49:36.642 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:36.642 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:36.645 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:49:36.645 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:49:36.650 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 48.1877ms
2025-07-20 17:49:36.650 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 70.1474ms
2025-07-20 17:49:36.654 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:49:36.654 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:49:36.662 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:49:36.662 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:49:36.663 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:36.663 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:36.737 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:49:36.737 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:49:36.746 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:49:36.746 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:49:36.750 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:49:36.757 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 7.7005ms
2025-07-20 17:49:36.758 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:49:36.758 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:49:36.769 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 114.8328ms
2025-07-20 17:49:37.004 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:49:37.066 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:49:37.140 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 392.4844ms
2025-07-20 17:49:37.142 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:49:37.144 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:49:37.153 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 498.3781ms
2025-07-20 17:49:49.449 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:49:49.450 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:49:49.451 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:49.451 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:49:49.452 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 3.0949ms
2025-07-20 17:49:49.455 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 487
2025-07-20 17:49:49.458 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"213","description":"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj","unit":"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj","unitPrice":2,"paymentType":"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj","managementArea":"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj","currency":"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj"}
2025-07-20 17:49:49.460 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:49:49.468 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:49:49.479 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:49:49.680 +03:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:49:49.699 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-20 17:49:49.707 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 227.1759ms
2025-07-20 17:49:49.708 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:49:49.709 +03:00 [ERR] An unhandled exception occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 277
   at lambda_method512(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
2025-07-20 17:49:49.727 +03:00 [INF] HTTP POST /api/work-order-items - Response: 500: {"Status":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Data":"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\u00601 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277\r\n   at lambda_method512(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:49:49.732 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 276.9983ms
2025-07-20 17:51:20.799 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:51:20.800 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:51:20.800 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:51:20.801 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:51:20.801 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.3589ms
2025-07-20 17:51:20.804 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 21026
2025-07-20 17:51:20.806 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"324","description":"[17:49:49 INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 487 [17:49:49 INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {\"itemNumber\":\"213\",\"description\":\"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj\",\"unit\":\"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj\",\"unitPrice\":2,\"paymentType\":\"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj\",\"managementArea\":\"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj\",\"currency\":\"dotnet run --project Backend/UnifiedContract.API/UnifiedContract.API.csproj\"} [17:49:49 INF] CORS policy execution successful. [JWT DEBUG] Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3ZWIwOGUxNC00ZTRjLTQ4MDEtOTNlNS01ZDgyMWJiYTdmZDIiLCJlbWFpbCI6ImFkbWluQHVuaWZpZWRjb250cmFjdC5jb20iLCJuYW1lIjoiU3lzdGVtIEFkbWluaXN0cmF0b3IiLCJyb2xlIjoidXNlciIsImV4cCI6MTc1MzAyNjc3NywiaXNzIjoiVW5pZmllZENvbnRyYWN0QVBJX0RldiIsImF1ZCI6IlVuaWZpZWRDb250cmFjdENsaWVudF9EZXYifQ.OnF84zu5W9GYcwdQ24h74gUDqEuQczYmdXp1sp-xNDo JWT Token validated for: [17:49:49 INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)' [17:49:49 INF] Route matched with {action = \"CreateWorkOrderItem\", controller = \"WorkOrders\"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API). [17:49:49 ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 4000), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']        SET IMPLICIT_TRANSACTIONS OFF; SET NOCOUNT ON; INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId]) VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20); [17:49:49 ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'. Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.  ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'. The statement has been terminated.    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)    at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state) --- End of stack trace from previous location ---    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)    at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread) --- End of stack trace from previous location ---    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken) ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b Error Number:2628,State:1,Class:16    --- End of inner exception stack trace ---    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)           at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.  ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'. The statement has been terminated.    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)    at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state) --- End of stack trace from previous location ---    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)    at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread) --- End of stack trace from previous location ---    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken) ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b Error Number:2628,State:1,Class:16    --- End of inner exception stack trace ---    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)           at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) [17:49:49 INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 227.1759ms [17:49:49 INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)' [17:49:49 ERR] An unhandled exception occurred. Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.  ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Unit'. Truncated value: 'dotnet run --project Backend/UnifiedContract.API/U'. The statement has been terminated.    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)    at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state) --- End of stack trace from previous location ---    at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)    at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread) --- End of stack trace from previous location ---    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken) ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b Error Number:2628,State:1,Class:16    --- End of inner exception stack trace ---    at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)           at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)    at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)    at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277    at lambda_method512(Closure, Object)    at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)    at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)    at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)    at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)    at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)    at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)    at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)    at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)    at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)    at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)    at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26   [17:49:49 INF] HTTP POST /api/work-order-items - Response: 500: {\"Status\":false,\"Message\":\"An error occurred while saving the entity changes. See the inner exception for details.\",\"Data\":\"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\\u00601 entries, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\\u00601 entriesToSave, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\\u00604 operation, Func\\u00604 verifySucceeded, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\\r\\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\\r\\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\\\Zohary\\\\Development\\\\Repos\\\\V2\\\\unifiedContractV2-main\\\\Backend\\\\UnifiedContract.API\\\\Controllers\\\\WorkOrdersController.cs:line 277\\r\\n   at lambda_method512(Closure, Object)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\\u003CInvokeActionMethodAsync\\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\\u00601 actionResultValueTask)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\\u003CInvokeNextActionFilterAsync\\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\\u0026 next, Scope\\u0026 scope, Object\\u0026 state, Boolean\\u0026 isCompleted)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\\u003CInvokeInnerFilterAsync\\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\\u003CInvokeFilterPipelineAsync\\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\\u003CInvokeAsync\\u003Eg__Logged|17_1(ResourceInvoker invoker)\\r\\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\\u003CInvokeAsync\\u003Eg__Logged|17_1(ResourceInvoker invoker)\\r\\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\\u003CInvoke\\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\\r\\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\\\Zohary\\\\Development\\\\Repos\\\\V2\\\\unifiedContractV2-main\\\\Backend\\\\UnifiedContract.API\\\\Middleware\\\\ExceptionHandlingMiddleware.cs:line 26\",\"ErrorCode\":null,\"ValidationErrors\":null} [17:49:49 INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 276.9983ms","unit":"dfds","unitPrice":4,"paymentType":"fdsfdsfds","managementArea":"dsfasdafdafdfa","currency":"dfsf"}
2025-07-20 17:51:20.829 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:51:20.832 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:51:20.833 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:51:20.872 +03:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = -1), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 50), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:51:20.876 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Description'. Truncated value: '[17:49:49 INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - applicati'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Description'. Truncated value: '[17:49:49 INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - applicati'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-20 17:51:20.881 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 47.4033ms
2025-07-20 17:51:20.882 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:51:20.882 +03:00 [ERR] An unhandled exception occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): String or binary data would be truncated in table 'UnifiedContract_Dev.dbo.WorkOrderItems', column 'Description'. Truncated value: '[17:49:49 INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - applicati'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:2628,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 277
   at lambda_method512(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
2025-07-20 17:51:20.891 +03:00 [INF] HTTP POST /api/work-order-items - Response: 500: {"Status":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Data":"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\u00601 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277\r\n   at lambda_method512(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:51:20.895 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 90.9609ms
2025-07-20 17:52:17.957 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:52:17.958 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:52:17.959 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:52:17.959 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:52:17.960 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.732ms
2025-07-20 17:52:17.962 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 172
2025-07-20 17:52:17.963 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"213213","description":"dfsfdf sdfsdf sfdsf sdfdhgshg sfdg fds","unit":"lot","unitPrice":5,"paymentType":"cash","managementArea":"dsad dsad","currency":"sar"}
2025-07-20 17:52:17.964 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:52:17.966 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:52:17.967 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:52:17.978 +03:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 50), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:52:17.982 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'UnifiedContract.Persistence.UnifiedContractDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-07-20 17:52:17.991 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 23.28ms
2025-07-20 17:52:17.992 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:52:17.993 +03:00 [ERR] An unhandled exception occurred.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_WorkOrderItems_WorkOrders_WorkOrderId". The conflict occurred in database "UnifiedContract_Dev", table "dbo.WorkOrders", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:955172bf-4703-458a-b1b2-770338e4430b
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Controllers\WorkOrdersController.cs:line 277
   at lambda_method512(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API\Middleware\ExceptionHandlingMiddleware.cs:line 26
2025-07-20 17:52:18.010 +03:00 [INF] HTTP POST /api/work-order-items - Response: 500: {"Status":false,"Message":"An error occurred while saving the entity changes. See the inner exception for details.","Data":"   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable\u00601 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList\u00601 entries, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList\u00601 entriesToSave, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func\u00604 operation, Func\u00604 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\r\n   at UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem(CreateWorkOrderItemDto dto) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Controllers\\WorkOrdersController.cs:line 277\r\n   at lambda_method512(Closure, Object)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeActionMethodAsync\u003Eg__Awaited|12_0(ControllerActionInvoker invoker, ValueTask\u00601 actionResultValueTask)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeNextActionFilterAsync\u003Eg__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State\u0026 next, Scope\u0026 scope, Object\u0026 state, Boolean\u0026 isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.\u003CInvokeInnerFilterAsync\u003Eg__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeFilterPipelineAsync\u003Eg__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.\u003CInvokeAsync\u003Eg__Logged|17_1(ResourceInvoker invoker)\r\n   at Microsoft.AspNetCore.Routing.EndpointMiddleware.\u003CInvoke\u003Eg__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)\r\n   at UnifiedContract.API.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\\Zohary\\Development\\Repos\\V2\\unifiedContractV2-main\\Backend\\UnifiedContract.API\\Middleware\\ExceptionHandlingMiddleware.cs:line 26","ErrorCode":null,"ValidationErrors":null}
2025-07-20 17:52:18.015 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 500 null application/json 52.8832ms
2025-07-20 17:53:44.908 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 17:53:44.909 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:53:44.909 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:44.909 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 17:53:44.910 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 1.7139ms
2025-07-20 17:53:44.913 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:53:44.913 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:53:44.914 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:44.916 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:53:44.919 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:53:45.191 +03:00 [INF] Executed DbCommand (164ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:53:45.321 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:53:45.328 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 408.2212ms
2025-07-20 17:53:45.328 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:53:45.329 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:53:45.331 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 418.2363ms
2025-07-20 17:53:45.841 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.842 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.843 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.843 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:53:45.843 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.844 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 3.1492ms
2025-07-20 17:53:45.845 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.845 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.846 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:53:45.846 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 2.599ms
2025-07-20 17:53:45.846 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.848 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.848 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.849 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.849 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.850 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.850 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:53:45.852 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:53:45.852 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.2053ms
2025-07-20 17:53:45.854 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:53:45.857 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:53:45.861 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.863 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.864 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.865 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:53:45.866 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.3931ms
2025-07-20 17:53:45.866 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:53:45.875 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.876 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.876 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.878 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:53:45.878 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.1016ms
2025-07-20 17:53:45.878 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:53:45.885 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:53:45.886 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:53:45.886 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:45.888 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:53:45.888 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.116ms
2025-07-20 17:53:45.888 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:53:45.998 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:53:46.216 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:53:46.245 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:53:46.249 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 391.256ms
2025-07-20 17:53:46.249 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:53:46.250 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 17:53:46.250 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 404.3168ms
2025-07-20 17:53:48.605 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:53:48.607 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:53:48.608 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:48.608 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Response: 204: 
2025-07-20 17:53:48.609 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - 204 null null 3.5961ms
2025-07-20 17:53:48.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:53:48.612 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:53:48.612 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:53:48.616 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:53:48.621 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:53:48.625 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:53:48.653 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 31.0135ms
2025-07-20 17:53:48.654 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:53:48.655 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"id":["The value 'undefined' is not valid."]},"traceId":"00-73bf20283ef65f608114ccd0c8ef79b2-19d94f5ea9920711-00"}
2025-07-20 17:53:48.656 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - 400 null application/problem+json; charset=utf-8 44.6634ms
2025-07-20 17:55:30.455 +03:00 [INF] Application is shutting down...
2025-07-20 17:56:37.499 +03:00 [WRN] The foreign key property 'ActionNeeded.WorkOrderId1' was created in shadow state because a conflicting property with the simple name 'WorkOrderId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-07-20 17:56:37.622 +03:00 [WRN] No store type was specified for the decimal property 'Budget' on entity type 'Department'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:56:37.625 +03:00 [WRN] No store type was specified for the decimal property 'ActualQuantity' on entity type 'SiteReport'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:56:37.625 +03:00 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'SiteReportMaterialUsed'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-07-20 17:56:38.553 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:56:38.560 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-20 17:56:38.576 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-20 17:56:38.628 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-20 17:56:38.637 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-20 17:56:38.638 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-20 17:56:38.641 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-20 17:56:38.650 +03:00 [INF] Applying migration '20250720145558_MakeWorkOrderIdNullableOnWorkOrderItem'.
2025-07-20 17:56:38.888 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[WorkOrderItems]') AND [c].[name] = N'WorkOrderId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [WorkOrderItems] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [WorkOrderItems] ALTER COLUMN [WorkOrderId] uniqueidentifier NULL;
2025-07-20 17:56:38.891 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250720145558_MakeWorkOrderIdNullableOnWorkOrderItem', N'9.0.7');
2025-07-20 17:56:38.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-20 17:56:38.900 +03:00 [INF] Starting web host
2025-07-20 17:56:38.912 +03:00 [INF] User profile is available. Using 'C:\Users\LENOVO\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-20 17:56:38.971 +03:00 [INF] Now listening on: http://localhost:5275
2025-07-20 17:56:38.974 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-20 17:56:38.974 +03:00 [INF] Hosting environment: Development
2025-07-20 17:56:38.975 +03:00 [INF] Content root path: D:\Zohary\Development\Repos\V2\unifiedContractV2-main\Backend\UnifiedContract.API
2025-07-20 17:56:43.728 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:56:43.777 +03:00 [WRN] Failed to determine the https port for redirect.
2025-07-20 17:56:43.790 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:56:43.793 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:56:43.799 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:56:43.841 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 114.079ms
2025-07-20 17:56:43.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:56:43.867 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:56:43.869 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:56:43.978 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:56:43.998 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:56:44.393 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:56:44.529 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:56:44.720 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 716.0983ms
2025-07-20 17:56:44.721 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:56:44.723 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:56:44.758 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 909.3931ms
2025-07-20 17:57:00.419 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:57:00.421 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:57:00.422 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:57:00.423 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:57:00.424 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 6.0433ms
2025-07-20 17:57:00.428 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5275/api/work-order-items - application/json 148
2025-07-20 17:57:00.434 +03:00 [INF] HTTP POST /api/work-order-items - Request: http localhost:5275/api/work-order-items  {"itemNumber":"354435","description":"xxxxxxxxx","unit":"dsd","unitPrice":4,"paymentType":"xxxxxxxxx","managementArea":"xxxxxxxxx","currency":"sad"}
2025-07-20 17:57:00.436 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:57:00.445 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:57:00.465 +03:00 [INF] Route matched with {action = "CreateWorkOrderItem", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]] CreateWorkOrderItem(UnifiedContract.API.Models.CreateWorkOrderItemDto) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:57:00.784 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p2='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p3='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p4='?' (DbType = DateTime2), @p5='?' (Size = 50), @p6='?' (Size = 4000), @p7='?' (Size = 1000), @p8='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p9='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p10='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p11='?' (DbType = Boolean), @p12='?' (Size = 50), @p13='?' (DbType = DateTime2), @p14='?' (Size = 50), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (Size = 500), @p18='?' (Size = 50), @p19='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p20='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [WorkOrderItems] ([Id], [ActualPrice], [ActualPriceWithVAT], [ActualQuantity], [CreatedAt], [CreatedBy], [Currency], [Description], [EstimatedPrice], [EstimatedPriceWithVAT], [EstimatedQuantity], [IsDeleted], [ItemNumber], [LastModifiedAt], [LastModifiedBy], [ManagementArea], [PaymentType], [ReasonForFinalQuantity], [Unit], [UnitPrice], [WorkOrderId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-07-20 17:57:00.800 +03:00 [INF] Executing CreatedAtActionResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:57:00.825 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API) in 357.535ms
2025-07-20 17:57:00.826 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.CreateWorkOrderItem (UnifiedContract.API)'
2025-07-20 17:57:00.827 +03:00 [INF] HTTP POST /api/work-order-items - Response: 201: {"status":true,"message":"Item created.","data":{"itemNumber":"354435","description":"xxxxxxxxx","unit":"dsd","unitPrice":4,"estimatedQuantity":0,"estimatedPrice":0,"estimatedPriceWithVAT":0,"actualQuantity":0,"actualPrice":0,"actualPriceWithVAT":0,"reasonForFinalQuantity":"","paymentType":"xxxxxxxxx","managementArea":"xxxxxxxxx","currency":"sad","workOrderId":null,"id":"481c3b54-82b5-45d4-b9c0-9a702704cc6b","createdAt":"2025-07-20T14:57:00.7123682Z","createdBy":"system","lastModifiedAt":"2025-07-20T14:57:00.5357762Z","lastModifiedBy":"system","isDeleted":false,"domainEvents":[]},"errorCode":null,"validationErrors":null}
2025-07-20 17:57:00.830 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5275/api/work-order-items - 201 null application/json; charset=utf-8 401.7604ms
2025-07-20 17:58:30.655 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:58:30.656 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:58:30.657 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:58:30.657 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:58:30.657 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 2.0537ms
2025-07-20 17:58:30.660 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:58:30.662 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:58:30.663 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:58:30.670 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:58:30.673 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:58:30.675 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:58:30.684 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 9.7493ms
2025-07-20 17:58:30.685 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:58:30.686 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:58:30.687 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 26.2206ms
2025-07-20 17:58:30.752 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:58:30.753 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:58:30.753 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:58:30.754 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:58:30.754 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.3957ms
2025-07-20 17:58:30.757 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:58:30.758 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:58:30.759 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:58:30.761 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:58:30.762 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:58:30.776 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:58:30.779 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:58:30.781 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 18.0626ms
2025-07-20 17:58:30.782 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:58:30.782 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"354435","description":"xxxxxxxxx","unit":"dsd","unitPrice":4.00,"estimatedQuantity":0.00,"estimatedPrice":0.00,"estimatedPriceWithVAT":0.00,"actualQuantity":0.00,"actualPrice":0.00,"actualPriceWithVAT":0.00,"reasonForFinalQuantity":"","paymentType":"xxxxxxxxx","managementArea":"xxxxxxxxx","currency":"sad","workOrderId":null,"id":"481c3b54-82b5-45d4-b9c0-9a702704cc6b","createdAt":"2025-07-20T14:57:00.7123682","createdBy":"system","lastModifiedAt":"2025-07-20T14:57:00.5357762","lastModifiedBy":"system","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:58:30.786 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 28.8604ms
2025-07-20 17:59:20.425 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 17:59:20.427 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:59:20.432 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:20.457 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 17:59:20.460 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 35.425ms
2025-07-20 17:59:20.466 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 17:59:20.468 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 17:59:20.469 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:20.474 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:59:20.475 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 17:59:20.476 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 17:59:20.477 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 1.2939ms
2025-07-20 17:59:20.478 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 17:59:20.478 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 17:59:20.479 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 12.6918ms
2025-07-20 17:59:20.546 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 17:59:20.547 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:59:20.547 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:20.548 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 17:59:20.549 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 3.2345ms
2025-07-20 17:59:20.553 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 17:59:20.554 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 17:59:20.555 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:20.557 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:59:20.558 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:20.564 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 17:59:20.566 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:59:20.568 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 9.2489ms
2025-07-20 17:59:20.568 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:59:20.570 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 17:59:20.575 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 22.2682ms
2025-07-20 17:59:26.231 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 17:59:26.232 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:59:26.232 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:26.233 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 17:59:26.234 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.7132ms
2025-07-20 17:59:26.236 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:59:26.238 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:59:26.239 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:26.242 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:59:26.252 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:26.530 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:59:26.725 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:59:26.735 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 481.5764ms
2025-07-20 17:59:26.735 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:59:26.735 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"Demo Client","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:59:26.737 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 500.3018ms
2025-07-20 17:59:27.609 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.611 +03:00 [INF] HTTP OPTIONS /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.612 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.613 +03:00 [INF] HTTP OPTIONS /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 204: 
2025-07-20 17:59:27.613 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 204 null null 4.239ms
2025-07-20 17:59:27.614 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.616 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.618 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.619 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.619 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.620 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.620 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 204: 
2025-07-20 17:59:27.621 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 204 null null 6.8562ms
2025-07-20 17:59:27.622 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:59:27.625 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.627 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.627 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.631 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:59:27.631 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:27.631 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 6.3708ms
2025-07-20 17:59:27.634 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:59:27.646 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.648 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.649 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.651 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:59:27.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 5.3869ms
2025-07-20 17:59:27.653 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:59:27.663 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.665 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.666 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.667 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:59:27.668 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 4.8311ms
2025-07-20 17:59:27.670 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:59:27.677 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - null null
2025-07-20 17:59:27.678 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Request: http localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb  
2025-07-20 17:59:27.679 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:27.681 +03:00 [INF] HTTP GET /api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 404: 
2025-07-20 17:59:27.682 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 404 0 null 4.3998ms
2025-07-20 17:59:27.683 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb, Response status code: 404
2025-07-20 17:59:27.801 +03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-07-20 17:59:28.070 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:59:28.122 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:59:28.129 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 496.5409ms
2025-07-20 17:59:28.129 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:59:28.129 +03:00 [INF] HTTP GET /api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - Response: 200: {"status":true,"message":"Success","data":{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"Demo Client","location":"Jeddah","status":"Completed","priority":"High","category":"Mechanical","type":"Maintenance","class":"B","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":2500.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 17:59:28.132 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb - 200 null application/json; charset=utf-8 515.6123ms
2025-07-20 17:59:50.457 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 17:59:50.458 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:59:50.458 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:50.459 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 17:59:50.459 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.1027ms
2025-07-20 17:59:50.463 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 17:59:50.464 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 17:59:50.465 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:50.466 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:59:50.467 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:50.478 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 17:59:50.484 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 17:59:50.485 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 16.2395ms
2025-07-20 17:59:50.486 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 17:59:50.486 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"SEC","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 17:59:50.488 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 25.2945ms
2025-07-20 17:59:51.689 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.690 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.691 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.692 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:59:51.692 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.693 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 4.0529ms
2025-07-20 17:59:51.694 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.695 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.696 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 17:59:51.696 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.696 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 4.5215ms
2025-07-20 17:59:51.698 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.699 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.699 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.700 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.701 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.701 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:59:51.703 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:51.703 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:59:51.705 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 5.8445ms
2025-07-20 17:59:51.705 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:59:51.708 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 17:59:51.722 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 17:59:51.722 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 18.5701ms
2025-07-20 17:59:51.723 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 17:59:51.723 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 17:59:51.725 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 28.7141ms
2025-07-20 17:59:51.786 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.787 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.788 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.790 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:59:51.791 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 5.2047ms
2025-07-20 17:59:51.792 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:59:51.812 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.814 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.814 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.816 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:59:51.817 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.6479ms
2025-07-20 17:59:51.819 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:59:51.827 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 17:59:51.828 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 17:59:51.829 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:51.830 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 17:59:51.831 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.6022ms
2025-07-20 17:59:51.831 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 17:59:54.486 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:59:54.488 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:59:54.488 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:54.488 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Response: 204: 
2025-07-20 17:59:54.489 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - 204 null null 3.0147ms
2025-07-20 17:59:54.492 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 17:59:54.493 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 17:59:54.493 +03:00 [INF] CORS policy execution successful.
2025-07-20 17:59:54.496 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:59:54.501 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 17:59:54.505 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 17:59:54.530 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 28.0056ms
2025-07-20 17:59:54.531 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 17:59:54.531 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"id":["The value 'undefined' is not valid."]},"traceId":"00-c876c78f672486df17e64317c541fd63-3cbceb74f170f21f-00"}
2025-07-20 17:59:54.533 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - 400 null application/problem+json; charset=utf-8 40.5765ms
2025-07-20 18:00:03.484 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 18:00:03.485 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 18:00:03.485 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:03.486 +03:00 [INF] HTTP OPTIONS /api/work-orders/undefined/items - Response: 204: 
2025-07-20 18:00:03.486 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/undefined/items - 204 null null 1.9ms
2025-07-20 18:00:03.488 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - null null
2025-07-20 18:00:03.489 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Request: http localhost:5275/api/work-orders/undefined/items  
2025-07-20 18:00:03.490 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:03.491 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:00:03.491 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:00:03.493 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-07-20 18:00:03.494 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 1.3805ms
2025-07-20 18:00:03.494 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:00:03.495 +03:00 [INF] HTTP GET /api/work-orders/undefined/items - Response: 400: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"id":["The value 'undefined' is not valid."]},"traceId":"00-325a4bf11274088cfdeffaada9df09ea-c78a8a7fa7aac525-00"}
2025-07-20 18:00:03.496 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/undefined/items - 400 null application/problem+json; charset=utf-8 7.1067ms
2025-07-20 18:00:54.272 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 18:00:54.273 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:00:54.274 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:54.275 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 18:00:54.275 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.8652ms
2025-07-20 18:00:54.278 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 18:00:54.279 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:00:54.279 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:54.282 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:00:54.282 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:00:54.302 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 18:00:54.306 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:00:54.307 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 23.591ms
2025-07-20 18:00:54.308 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:00:54.309 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"SEC","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 18:00:54.311 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 33.4686ms
2025-07-20 18:00:55.924 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:00:55.926 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:00:55.926 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:55.927 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Response: 204: 
2025-07-20 18:00:55.928 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - 204 null null 3.333ms
2025-07-20 18:00:55.931 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:00:55.932 +03:00 [INF] HTTP GET /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:00:55.933 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:55.935 +03:00 [INF] HTTP GET /api/work-orders//items - Response: 404: 
2025-07-20 18:00:55.936 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders//items - 404 0 null 4.2454ms
2025-07-20 18:00:55.936 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/work-orders//items, Response status code: 404
2025-07-20 18:00:59.943 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 18:00:59.944 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:00:59.945 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:59.945 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 18:00:59.945 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 1.9793ms
2025-07-20 18:00:59.950 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 18:00:59.952 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:00:59.953 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:00:59.956 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:00:59.957 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:00:59.961 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 18:00:59.967 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:00:59.968 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 10.924ms
2025-07-20 18:00:59.970 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:00:59.970 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"SEC","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 18:00:59.973 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 23.7453ms
2025-07-20 18:01:01.417 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:01:01.418 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:01:01.419 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:01.419 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Response: 204: 
2025-07-20 18:01:01.420 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - 204 null null 3.1745ms
2025-07-20 18:01:01.423 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:01:01.424 +03:00 [INF] HTTP GET /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:01:01.424 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:01.427 +03:00 [INF] HTTP GET /api/work-orders//items - Response: 404: 
2025-07-20 18:01:01.427 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders//items - 404 0 null 4.5577ms
2025-07-20 18:01:01.428 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/work-orders//items, Response status code: 404
2025-07-20 18:01:23.418 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 18:01:23.419 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 18:01:23.419 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:23.419 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 18:01:23.420 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 1.631ms
2025-07-20 18:01:23.422 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 18:01:23.423 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 18:01:23.424 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:23.425 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 18:01:23.426 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 18:01:23.427 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 18:01:23.427 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 0.881ms
2025-07-20 18:01:23.428 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 18:01:23.428 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 18:01:23.429 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 6.3482ms
2025-07-20 18:01:23.492 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:01:23.493 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:01:23.493 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:23.494 +03:00 [INF] HTTP OPTIONS /api/work-orders//items - Response: 204: 
2025-07-20 18:01:23.494 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders//items - 204 null null 2.0695ms
2025-07-20 18:01:23.496 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders//items - null null
2025-07-20 18:01:23.497 +03:00 [INF] HTTP GET /api/work-orders//items - Request: http localhost:5275/api/work-orders//items  
2025-07-20 18:01:23.498 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:23.499 +03:00 [INF] HTTP GET /api/work-orders//items - Response: 404: 
2025-07-20 18:01:23.499 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders//items - 404 0 null 2.7207ms
2025-07-20 18:01:23.500 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/work-orders//items, Response status code: 404
2025-07-20 18:01:43.975 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 18:01:43.976 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:01:43.976 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:43.976 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 18:01:43.977 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.314ms
2025-07-20 18:01:43.979 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 18:01:43.981 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:01:43.981 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:43.983 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:01:43.984 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:01:44.006 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 18:01:44.013 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:01:44.015 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 30.4354ms
2025-07-20 18:01:44.016 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:01:44.017 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"SEC","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 18:01:44.020 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 40.4244ms
2025-07-20 18:01:57.611 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.612 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.612 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.613 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.613 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.614 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:01:57.614 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.615 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 3.3546ms
2025-07-20 18:01:57.615 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:01:57.616 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 3.8532ms
2025-07-20 18:01:57.619 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.619 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.619 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.620 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.621 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.621 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.623 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:01:57.625 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:01:57.625 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:01:57.627 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 7.5645ms
2025-07-20 18:01:57.628 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:01:57.636 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.636 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.637 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.640 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:01:57.641 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 5.1785ms
2025-07-20 18:01:57.642 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:01:57.648 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.649 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.649 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.652 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:01:57.652 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.1269ms
2025-07-20 18:01:57.653 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:01:57.660 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:01:57.662 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:01:57.663 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:57.665 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:01:57.665 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.7997ms
2025-07-20 18:01:57.667 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:01:57.678 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 18:01:57.691 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:01:57.692 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 65.858ms
2025-07-20 18:01:57.693 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:01:57.693 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 18:01:57.696 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 77.064ms
2025-07-20 18:01:59.291 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:01:59.292 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:01:59.292 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:59.293 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 204: 
2025-07-20 18:01:59.294 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 204 null null 2.5379ms
2025-07-20 18:01:59.296 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:01:59.297 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:01:59.298 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:01:59.300 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:01:59.301 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:01:59.326 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__workOrderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
WHERE [w].[WorkOrderId] = @__workOrderId_0
2025-07-20 18:01:59.328 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:01:59.329 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 26.9163ms
2025-07-20 18:01:59.330 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:01:59.330 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:01:59.334 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 200 null application/json; charset=utf-8 37.6177ms
2025-07-20 18:02:10.873 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - null null
2025-07-20 18:02:10.874 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 18:02:10.875 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:10.875 +03:00 [INF] HTTP OPTIONS /api/work-order-items - Response: 204: 
2025-07-20 18:02:10.875 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-order-items - 204 null null 2.3395ms
2025-07-20 18:02:10.878 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-order-items - null null
2025-07-20 18:02:10.880 +03:00 [INF] HTTP GET /api/work-order-items - Request: http localhost:5275/api/work-order-items  
2025-07-20 18:02:10.880 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:10.882 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:10.883 +03:00 [INF] Route matched with {action = "GetAllWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetAllWorkOrderItems() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:02:10.888 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
2025-07-20 18:02:10.891 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:02:10.892 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API) in 8.5408ms
2025-07-20 18:02:10.893 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetAllWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:10.893 +03:00 [INF] HTTP GET /api/work-order-items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1002-001","description":"Electrical Wiring - 2.5mm² for power distribution","unit":"m","unitPrice":1250.00,"estimatedQuantity":2.00,"estimatedPrice":2500.00,"estimatedPriceWithVAT":2875.00,"actualQuantity":2.00,"actualPrice":2500.00,"actualPriceWithVAT":2875.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","id":"10000000-0000-0000-0000-000000000003","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:02:10.896 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-order-items - 200 null application/json; charset=utf-8 17.7011ms
2025-07-20 18:02:23.743 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - null null
2025-07-20 18:02:23.744 +03:00 [INF] HTTP OPTIONS /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:02:23.745 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:23.745 +03:00 [INF] HTTP OPTIONS /api/work-orders - Response: 204: 
2025-07-20 18:02:23.746 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders - 204 null null 2.2724ms
2025-07-20 18:02:23.748 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders - null null
2025-07-20 18:02:23.749 +03:00 [INF] HTTP GET /api/work-orders - Request: http localhost:5275/api/work-orders  
2025-07-20 18:02:23.750 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:23.752 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:02:23.752 +03:00 [INF] Route matched with {action = "GetWorkOrders", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Application.DTOs.WorkOrderListItemDto]]]] GetWorkOrders() on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:02:23.765 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt], [w0].[CreatedBy], [w0].[Description], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted], [w0].[LastModifiedAt], [w0].[LastModifiedBy], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id], [p].[Code], [p].[ColorCode], [p].[CreatedAt], [p].[CreatedBy], [p].[Description], [p].[DisplayOrder], [p].[IsActive], [p].[IsDeleted], [p].[LastModifiedAt], [p].[LastModifiedBy], [p].[Metadata], [p].[Name], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt], [c].[CreatedBy], [c].[Email], [c].[Industry], [c].[IsActive], [c].[IsDeleted], [c].[LastModifiedAt], [c].[LastModifiedBy], [c].[LogoUrl], [c].[Name], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
FROM [WorkOrders] AS [w]
INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
2025-07-20 18:02:23.771 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Application.DTOs.WorkOrderListItemDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:02:23.772 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API) in 19.2924ms
2025-07-20 18:02:23.772 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrders (UnifiedContract.API)'
2025-07-20 18:02:23.773 +03:00 [INF] HTTP GET /api/work-orders - Response: 200: {"status":true,"message":"Success","data":[{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","statusCode":"PENDING","statusName":"Pending","priorityCode":"NORMAL","priorityName":"Normal","category":"Electrical","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":1000.00},{"id":"bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb","workOrderNumber":"WO-1002","internalOrderNumber":"INT-1002","title":"Demo Work Order 2","description":"Second demo work order.","client":"SEC","location":"Jeddah","statusCode":"COMPLETED","statusName":"Completed","priorityCode":"HIGH","priorityName":"High","category":"Mechanical","completionPercentage":100.00,"receivedDate":"2024-07-10T12:00:00","startDate":"2024-07-11T08:00:00","dueDate":"2024-07-18T17:00:00","targetEndDate":"2024-07-19T17:00:00","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","estimatedCost":2500.00}],"errorCode":null,"validationErrors":null}
2025-07-20 18:02:23.775 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders - 200 null application/json; charset=utf-8 26.1025ms
2025-07-20 18:02:24.495 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.496 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.496 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.497 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.497 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.497 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.498 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:02:24.498 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:02:24.498 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 2.3707ms
2025-07-20 18:02:24.498 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 2.9603ms
2025-07-20 18:02:24.502 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.502 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.503 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.502 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.504 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.504 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.507 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:02:24.507 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:02:24.507 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 5.7454ms
2025-07-20 18:02:24.508 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:02:24.508 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:02:24.561 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 18:02:24.570 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:02:24.570 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 61.8922ms
2025-07-20 18:02:24.571 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:02:24.572 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 18:02:24.573 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 71.5205ms
2025-07-20 18:02:24.578 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.579 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.579 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.581 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:02:24.582 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.6778ms
2025-07-20 18:02:24.583 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:02:24.593 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.594 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.595 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.597 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:02:24.597 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 4.1849ms
2025-07-20 18:02:24.598 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:02:24.606 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:02:24.607 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:02:24.607 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:24.608 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:02:24.609 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 2.5416ms
2025-07-20 18:02:24.609 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:02:26.705 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:02:26.707 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:02:26.707 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:26.708 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 204: 
2025-07-20 18:02:26.708 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 204 null null 2.8779ms
2025-07-20 18:02:26.711 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:02:26.712 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:02:26.713 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:26.714 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:26.715 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:02:26.722 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__workOrderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
WHERE [w].[WorkOrderId] = @__workOrderId_0
2025-07-20 18:02:26.724 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:02:26.726 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 10.0928ms
2025-07-20 18:02:26.727 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:26.727 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:02:26.730 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 200 null application/json; charset=utf-8 19.4073ms
2025-07-20 18:02:34.572 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:02:34.573 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:02:34.574 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:34.574 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 204: 
2025-07-20 18:02:34.575 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 204 null null 2.2522ms
2025-07-20 18:02:34.577 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:02:34.578 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:02:34.578 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:02:34.580 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:34.581 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:02:34.584 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__workOrderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
WHERE [w].[WorkOrderId] = @__workOrderId_0
2025-07-20 18:02:34.585 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:02:34.586 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 4.5564ms
2025-07-20 18:02:34.587 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:02:34.587 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:02:34.590 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 200 null application/json; charset=utf-8 13.1619ms
2025-07-20 18:03:14.173 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - null null
2025-07-20 18:03:14.173 +03:00 [INF] HTTP OPTIONS /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 18:03:14.174 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.174 +03:00 [INF] HTTP OPTIONS /api/test-auth - Response: 204: 
2025-07-20 18:03:14.175 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/test-auth - 204 null null 1.4932ms
2025-07-20 18:03:14.177 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/test-auth - null null
2025-07-20 18:03:14.178 +03:00 [INF] HTTP GET /api/test-auth - Request: http localhost:5275/api/test-auth  
2025-07-20 18:03:14.178 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.180 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 18:03:14.181 +03:00 [INF] Route matched with {action = "Get", controller = "TestAuth"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Get() on controller UnifiedContract.API.Controllers.TestAuthController (UnifiedContract.API).
2025-07-20 18:03:14.181 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-07-20 18:03:14.182 +03:00 [INF] Executed action UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API) in 0.5264ms
2025-07-20 18:03:14.182 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.TestAuthController.Get (UnifiedContract.API)'
2025-07-20 18:03:14.183 +03:00 [INF] HTTP GET /api/test-auth - Response: 200: Authenticated!
2025-07-20 18:03:14.184 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/test-auth - 200 null text/plain; charset=utf-8 6.0268ms
2025-07-20 18:03:14.279 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.281 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.281 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.281 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.282 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:03:14.282 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.282 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 2.9177ms
2025-07-20 18:03:14.283 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.285 +03:00 [INF] HTTP OPTIONS /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 204: 
2025-07-20 18:03:14.285 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 204 null null 4.532ms
2025-07-20 18:03:14.286 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.287 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.287 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.287 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.289 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.290 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.290 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:03:14.291 +03:00 [INF] Route matched with {action = "GetWorkOrder", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[UnifiedContract.Application.DTOs.WorkOrderDetailsDto]]] GetWorkOrder(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:03:14.293 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:03:14.294 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 6.1706ms
2025-07-20 18:03:14.294 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:03:14.297 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[Category], [s].[Class], [s].[ClientId], [s].[CompletionPercentage], [s].[CreatedAt], [s].[CreatedBy], [s].[Description], [s].[DueDate], [s].[EngineerInChargeId], [s].[EstimatedCost], [s].[InternalOrderNumber], [s].[IsDeleted], [s].[LaborExpense], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Location], [s].[MaterialsExpense], [s].[OtherExpense], [s].[PriorityLevelId], [s].[ReceivedDate], [s].[StartDate], [s].[TargetEndDate], [s].[Title], [s].[Type], [s].[WorkOrderNumber], [s].[WorkOrderStatusId], [s].[Id0], [s].[AllowsEditing], [s].[Code], [s].[ColorCode], [s].[CreatedAt0], [s].[CreatedBy0], [s].[Description0], [s].[DisplayOrder], [s].[IsActive], [s].[IsCompleted], [s].[IsDeleted0], [s].[LastModifiedAt0], [s].[LastModifiedBy0], [s].[Metadata], [s].[Name], [s].[RequiresApproval], [s].[Id1], [s].[Code0], [s].[ColorCode0], [s].[CreatedAt1], [s].[CreatedBy1], [s].[Description1], [s].[DisplayOrder0], [s].[IsActive0], [s].[IsDeleted1], [s].[LastModifiedAt1], [s].[LastModifiedBy1], [s].[Metadata0], [s].[Name0], [s].[RequiresImmediateNotification], [s].[SeverityValue], [s].[TargetResponseHours], [s].[Id2], [s].[AccountManagerId], [s].[AlternatePhone], [s].[CompanyName], [s].[ContactPerson], [s].[CreatedAt2], [s].[CreatedBy2], [s].[Email], [s].[Industry], [s].[IsActive1], [s].[IsDeleted2], [s].[LastModifiedAt2], [s].[LastModifiedBy2], [s].[LogoUrl], [s].[Name1], [s].[Notes], [s].[Phone], [s].[VatNumber], [s].[Website], [s].[City], [s].[Country], [s].[Address_FormattedAddress], [s].[Address_Latitude], [s].[Address_Longitude], [s].[PostalCode], [s].[State], [s].[Street], [w1].[Id], [w1].[ActualPrice], [w1].[ActualPriceWithVAT], [w1].[ActualQuantity], [w1].[CreatedAt], [w1].[CreatedBy], [w1].[Currency], [w1].[Description], [w1].[EstimatedPrice], [w1].[EstimatedPriceWithVAT], [w1].[EstimatedQuantity], [w1].[IsDeleted], [w1].[ItemNumber], [w1].[LastModifiedAt], [w1].[LastModifiedBy], [w1].[ManagementArea], [w1].[PaymentType], [w1].[ReasonForFinalQuantity], [w1].[Unit], [w1].[UnitPrice], [w1].[WorkOrderId], [w2].[Id], [w2].[Content], [w2].[CreatedAt], [w2].[CreatedBy], [w2].[IsDeleted], [w2].[LastModifiedAt], [w2].[LastModifiedBy], [w2].[PeopleInvolved], [w2].[Type], [w2].[WorkOrderId], [w3].[Id], [w3].[AssignedToId], [w3].[CreatedAt], [w3].[CreatedBy], [w3].[Description], [w3].[IsDeleted], [w3].[LastModifiedAt], [w3].[LastModifiedBy], [w3].[Priority], [w3].[PriorityLevelId], [w3].[ReportedById], [w3].[ReportedDate], [w3].[ResolutionDate], [w3].[ResolutionNotes], [w3].[Severity], [w3].[Status], [w3].[Title], [w3].[WorkOrderId], [w4].[Id], [w4].[Completed], [w4].[ConfirmedById], [w4].[CreatedAt], [w4].[CreatedBy], [w4].[Description], [w4].[DueDate], [w4].[IsDeleted], [w4].[LastModifiedAt], [w4].[LastModifiedBy], [w4].[Priority], [w4].[PriorityLevelId], [w4].[StartDate], [w4].[Status], [w4].[Title], [w4].[WorkOrderId], [p0].[Id], [p0].[Authority], [p0].[CreatedAt], [p0].[CreatedBy], [p0].[Description], [p0].[DocumentRef], [p0].[ExpiryDate], [p0].[IsDeleted], [p0].[IssueDate], [p0].[IssuedBy], [p0].[LastModifiedAt], [p0].[LastModifiedBy], [p0].[Number], [p0].[Status], [p0].[Title], [p0].[Type], [p0].[WorkOrderId], [w5].[Id], [w5].[AssignedToId], [w5].[CompletedById], [w5].[CompletedDate], [w5].[CreatedAt], [w5].[CreatedBy], [w5].[Description], [w5].[DueDate], [w5].[IsDeleted], [w5].[LastModifiedAt], [w5].[LastModifiedBy], [w5].[Priority], [w5].[PriorityLevelId], [w5].[Status], [w5].[Title], [w5].[WorkOrderId], [w6].[Id], [w6].[Caption], [w6].[CreatedAt], [w6].[CreatedBy], [w6].[IsDeleted], [w6].[LastModifiedAt], [w6].[LastModifiedBy], [w6].[Type], [w6].[UploadedById], [w6].[UploadedDate], [w6].[Url], [w6].[WorkOrderId], [w7].[Id], [w7].[CreatedAt], [w7].[CreatedBy], [w7].[IsDeleted], [w7].[LastModifiedAt], [w7].[LastModifiedBy], [w7].[Status], [w7].[SubmittedById], [w7].[SubmittedDate], [w7].[Title], [w7].[Type], [w7].[Url], [w7].[WorkOrderId], [w8].[Id], [w8].[Amount], [w8].[ApprovedById], [w8].[ApprovedDate], [w8].[Category], [w8].[CreatedAt], [w8].[CreatedBy], [w8].[Currency], [w8].[Date], [w8].[Description], [w8].[IsDeleted], [w8].[LastModifiedAt], [w8].[LastModifiedBy], [w8].[Receipt], [w8].[Status], [w8].[SubmittedById], [w8].[WorkOrderId], [w9].[Id], [w9].[Amount], [w9].[CreatedAt], [w9].[CreatedBy], [w9].[Currency], [w9].[DueDate], [w9].[IsDeleted], [w9].[IssueDate], [w9].[LastModifiedAt], [w9].[LastModifiedBy], [w9].[Number], [w9].[PaidById], [w9].[PaidDate], [w9].[Status], [w9].[Url], [w9].[WorkOrderId]
FROM (
    SELECT TOP(1) [w].[Id], [w].[Category], [w].[Class], [w].[ClientId], [w].[CompletionPercentage], [w].[CreatedAt], [w].[CreatedBy], [w].[Description], [w].[DueDate], [w].[EngineerInChargeId], [w].[EstimatedCost], [w].[InternalOrderNumber], [w].[IsDeleted], [w].[LaborExpense], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[Location], [w].[MaterialsExpense], [w].[OtherExpense], [w].[PriorityLevelId], [w].[ReceivedDate], [w].[StartDate], [w].[TargetEndDate], [w].[Title], [w].[Type], [w].[WorkOrderNumber], [w].[WorkOrderStatusId], [w0].[Id] AS [Id0], [w0].[AllowsEditing], [w0].[Code], [w0].[ColorCode], [w0].[CreatedAt] AS [CreatedAt0], [w0].[CreatedBy] AS [CreatedBy0], [w0].[Description] AS [Description0], [w0].[DisplayOrder], [w0].[IsActive], [w0].[IsCompleted], [w0].[IsDeleted] AS [IsDeleted0], [w0].[LastModifiedAt] AS [LastModifiedAt0], [w0].[LastModifiedBy] AS [LastModifiedBy0], [w0].[Metadata], [w0].[Name], [w0].[RequiresApproval], [p].[Id] AS [Id1], [p].[Code] AS [Code0], [p].[ColorCode] AS [ColorCode0], [p].[CreatedAt] AS [CreatedAt1], [p].[CreatedBy] AS [CreatedBy1], [p].[Description] AS [Description1], [p].[DisplayOrder] AS [DisplayOrder0], [p].[IsActive] AS [IsActive0], [p].[IsDeleted] AS [IsDeleted1], [p].[LastModifiedAt] AS [LastModifiedAt1], [p].[LastModifiedBy] AS [LastModifiedBy1], [p].[Metadata] AS [Metadata0], [p].[Name] AS [Name0], [p].[RequiresImmediateNotification], [p].[SeverityValue], [p].[TargetResponseHours], [c].[Id] AS [Id2], [c].[AccountManagerId], [c].[AlternatePhone], [c].[CompanyName], [c].[ContactPerson], [c].[CreatedAt] AS [CreatedAt2], [c].[CreatedBy] AS [CreatedBy2], [c].[Email], [c].[Industry], [c].[IsActive] AS [IsActive1], [c].[IsDeleted] AS [IsDeleted2], [c].[LastModifiedAt] AS [LastModifiedAt2], [c].[LastModifiedBy] AS [LastModifiedBy2], [c].[LogoUrl], [c].[Name] AS [Name1], [c].[Notes], [c].[Phone], [c].[VatNumber], [c].[Website], [c].[City], [c].[Country], [c].[Address_FormattedAddress], [c].[Address_Latitude], [c].[Address_Longitude], [c].[PostalCode], [c].[State], [c].[Street]
    FROM [WorkOrders] AS [w]
    INNER JOIN [WorkOrderStatus] AS [w0] ON [w].[WorkOrderStatusId] = [w0].[Id]
    INNER JOIN [PriorityLevel] AS [p] ON [w].[PriorityLevelId] = [p].[Id]
    LEFT JOIN [Client].[Client] AS [c] ON [w].[ClientId] = [c].[Id]
    WHERE [w].[Id] = @__id_0
) AS [s]
LEFT JOIN [WorkOrderItems] AS [w1] ON [s].[Id] = [w1].[WorkOrderId]
LEFT JOIN [WorkOrderRemarks] AS [w2] ON [s].[Id] = [w2].[WorkOrderId]
LEFT JOIN [WorkOrderIssues] AS [w3] ON [s].[Id] = [w3].[WorkOrderId]
LEFT JOIN [WorkOrderTasks] AS [w4] ON [s].[Id] = [w4].[WorkOrderId]
LEFT JOIN [Permits] AS [p0] ON [s].[Id] = [p0].[WorkOrderId]
LEFT JOIN [WorkOrderActions] AS [w5] ON [s].[Id] = [w5].[WorkOrderId]
LEFT JOIN [WorkOrderPhotos] AS [w6] ON [s].[Id] = [w6].[WorkOrderId]
LEFT JOIN [WorkOrderForms] AS [w7] ON [s].[Id] = [w7].[WorkOrderId]
LEFT JOIN [WorkOrderExpenses] AS [w8] ON [s].[Id] = [w8].[WorkOrderId]
LEFT JOIN [WorkOrderInvoices] AS [w9] ON [s].[Id] = [w9].[WorkOrderId]
ORDER BY [s].[Id], [s].[Id0], [s].[Id1], [s].[Id2], [w1].[Id], [w2].[Id], [w3].[Id], [w4].[Id], [p0].[Id], [w5].[Id], [w6].[Id], [w7].[Id], [w8].[Id]
2025-07-20 18:03:14.307 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[UnifiedContract.Application.DTOs.WorkOrderDetailsDto, UnifiedContract.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-07-20 18:03:14.308 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API) in 14.7925ms
2025-07-20 18:03:14.308 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrder (UnifiedContract.API)'
2025-07-20 18:03:14.309 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 200: {"status":true,"message":"Success","data":{"id":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","workOrderNumber":"WO-1001","internalOrderNumber":"INT-1001","title":"Demo Work Order 1","description":"Demo work order for testing.","client":"SEC","location":"Riyadh","status":"Pending","priority":"Normal","category":"Electrical","type":"Project","class":"A","completionPercentage":0.00,"receivedDate":"2024-07-15T12:00:00","startDate":"2024-07-16T08:00:00","dueDate":"2024-07-25T17:00:00","targetEndDate":"2024-07-27T17:00:00","createdDate":"2024-07-20T12:00:00","createdBy":"seed","lastUpdated":"2024-07-20T12:00:00","estimatedPrice":1000.00,"engineerInCharge":""},"errorCode":null,"validationErrors":null}
2025-07-20 18:03:14.310 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 200 null application/json; charset=utf-8 24.1011ms
2025-07-20 18:03:14.343 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.344 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.344 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.345 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:03:14.346 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 2.3248ms
2025-07-20 18:03:14.346 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:03:14.392 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.393 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.393 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.394 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:03:14.394 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 2.2832ms
2025-07-20 18:03:14.395 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:03:14.623 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - null null
2025-07-20 18:03:14.624 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Request: http localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa  
2025-07-20 18:03:14.624 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:14.626 +03:00 [INF] HTTP GET /api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - Response: 404: 
2025-07-20 18:03:14.626 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa - 404 0 null 3.0226ms
2025-07-20 18:03:14.627 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5275/api/remarks/work-order/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa, Response status code: 404
2025-07-20 18:03:18.396 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:03:18.397 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:03:18.397 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:18.397 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 204: 
2025-07-20 18:03:18.397 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 204 null null 0.8978ms
2025-07-20 18:03:18.400 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:03:18.400 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:03:18.400 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:18.402 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:03:18.402 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:03:18.406 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__workOrderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
WHERE [w].[WorkOrderId] = @__workOrderId_0
2025-07-20 18:03:18.408 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:03:18.409 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 5.8758ms
2025-07-20 18:03:18.409 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:03:18.410 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:03:18.411 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 200 null application/json; charset=utf-8 11.7538ms
2025-07-20 18:03:22.652 +03:00 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:03:22.653 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:03:22.653 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:22.654 +03:00 [INF] HTTP OPTIONS /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 204: 
2025-07-20 18:03:22.654 +03:00 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 204 null null 2.6834ms
2025-07-20 18:03:22.657 +03:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - application/json 351
2025-07-20 18:03:22.658 +03:00 [INF] HTTP PUT /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  {"item":{"id":"10000000-0000-0000-0000-000000000001","itemNumber":"WOI-1001-001","lineType":"Description","shortDescription":"Concrete Mix - Grade 30 for foundation work","longDescription":"Concrete Mix - Grade 30 for foundation work","UOM":"m³","currency":"SAR","unitPrice":100,"paymentType":"Fixed Price","managementArea":"","estimatedQuantity":1}}
2025-07-20 18:03:22.659 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:22.661 +03:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-07-20 18:03:22.661 +03:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-07-20 18:03:22.661 +03:00 [INF] HTTP PUT /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 405: 
2025-07-20 18:03:22.662 +03:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 405 0 null 5.1242ms
2025-07-20 18:03:26.315 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - null null
2025-07-20 18:03:26.316 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Request: http localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items  
2025-07-20 18:03:26.317 +03:00 [INF] CORS policy execution successful.
2025-07-20 18:03:26.318 +03:00 [INF] Executing endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:03:26.319 +03:00 [INF] Route matched with {action = "GetWorkOrderItems", controller = "WorkOrders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UnifiedContract.API.Models.ApiResponse`1[System.Collections.Generic.IEnumerable`1[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem]]]] GetWorkOrderItems(System.Guid) on controller UnifiedContract.API.Controllers.WorkOrdersController (UnifiedContract.API).
2025-07-20 18:03:26.328 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__workOrderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [w].[Id], [w].[ActualPrice], [w].[ActualPriceWithVAT], [w].[ActualQuantity], [w].[CreatedAt], [w].[CreatedBy], [w].[Currency], [w].[Description], [w].[EstimatedPrice], [w].[EstimatedPriceWithVAT], [w].[EstimatedQuantity], [w].[IsDeleted], [w].[ItemNumber], [w].[LastModifiedAt], [w].[LastModifiedBy], [w].[ManagementArea], [w].[PaymentType], [w].[ReasonForFinalQuantity], [w].[Unit], [w].[UnitPrice], [w].[WorkOrderId]
FROM [WorkOrderItems] AS [w]
WHERE [w].[WorkOrderId] = @__workOrderId_0
2025-07-20 18:03:26.329 +03:00 [INF] Executing OkObjectResult, writing value of type 'UnifiedContract.API.Models.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[UnifiedContract.Domain.Entities.WorkOrder.WorkOrderItem, UnifiedContract.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-20 18:03:26.331 +03:00 [INF] Executed action UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API) in 11.6152ms
2025-07-20 18:03:26.332 +03:00 [INF] Executed endpoint 'UnifiedContract.API.Controllers.WorkOrdersController.GetWorkOrderItems (UnifiedContract.API)'
2025-07-20 18:03:26.333 +03:00 [INF] HTTP GET /api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - Response: 200: {"status":true,"message":"Success","data":[{"itemNumber":"WOI-1001-001","description":"Concrete Mix - Grade 30 for foundation work","unit":"m³","unitPrice":100.00,"estimatedQuantity":10.00,"estimatedPrice":1000.00,"estimatedPriceWithVAT":1150.00,"actualQuantity":10.00,"actualPrice":1000.00,"actualPriceWithVAT":1150.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000001","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]},{"itemNumber":"WOI-1001-002","description":"Steel Bars - 12mm for structural support","unit":"ton","unitPrice":120.00,"estimatedQuantity":5.00,"estimatedPrice":600.00,"estimatedPriceWithVAT":690.00,"actualQuantity":5.00,"actualPrice":600.00,"actualPriceWithVAT":690.00,"reasonForFinalQuantity":"Used as planned","paymentType":"Fixed Price","managementArea":"Default Area","currency":"SAR","workOrderId":"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa","id":"10000000-0000-0000-0000-000000000002","createdAt":"2024-07-20T12:00:00","createdBy":"seed","lastModifiedAt":"2024-07-20T12:00:00","lastModifiedBy":"seed","isDeleted":false,"domainEvents":[]}],"errorCode":null,"validationErrors":null}
2025-07-20 18:03:26.336 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5275/api/work-orders/aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa/items - 200 null application/json; charset=utf-8 21.0363ms
